{"ast":null,"code":"import React,{useState}from'react';import{TAG_CATEGORIES}from'../../constants/financial';import{useFinancial}from'../../contexts/FinancialContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const TransactionItem=_ref=>{var _TAG_CATEGORIES$trans;let{transaction,onAddTag,onRemoveTag,showAccountName=false,showTagging=true,className=''}=_ref;const{isPrivacyMode}=useFinancial();const[showTagDropdown,setShowTagDropdown]=useState(false);const handleAddTag=tagName=>{if(onAddTag&&!transaction.tags.includes(tagName)){onAddTag(transaction.id,tagName);setShowTagDropdown(false);}};const handleRemoveTag=tagName=>{if(onRemoveTag){onRemoveTag(transaction.id,tagName);}};return/*#__PURE__*/_jsx(\"div\",{className:`p-2 hover:bg-gray-50 transition-colors ${className}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-4 gap-4 items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0 text-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 truncate text-sm\",children:transaction.cleanMerchant.cleanName}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 truncate\",children:transaction.cleanMerchant.original})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:transaction.date}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[showAccountName?transaction.accountId:'',transaction.pending&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 px-1.5 py-0.5 text-xs bg-yellow-100 text-yellow-800 rounded-full\",children:\"Pending\"})]})]}),showTagging&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 flex-wrap\",children:[transaction.tags.map(tag=>{const tagInfo=TAG_CATEGORIES[tag];return/*#__PURE__*/_jsxs(\"span\",{className:`inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium group cursor-pointer ${(tagInfo===null||tagInfo===void 0?void 0:tagInfo.color)||'bg-gray-100 text-gray-800'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-1\",children:(tagInfo===null||tagInfo===void 0?void 0:tagInfo.icon)||'üìù'}),tag,/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveTag(tag),className:\"ml-1 text-current hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity\",children:\"\\xD7\"})]},tag);}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTagDropdown(!showTagDropdown),className:\"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors\",children:\"+ Tag\"}),showTagDropdown&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-full left-0 mt-1 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-2 max-h-48 overflow-y-auto\",children:Object.entries(TAG_CATEGORIES).map(_ref2=>{let[tagName,tagInfo]=_ref2;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleAddTag(tagName),className:\"w-full flex items-center px-2 py-1.5 text-xs rounded hover:bg-gray-50 text-left disabled:opacity-50\",disabled:transaction.tags.includes(tagName),children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:tagInfo.icon}),/*#__PURE__*/_jsx(\"span\",{className:transaction.tags.includes(tagName)?'text-gray-400':'text-gray-700',children:tagName}),transaction.tags.includes(tagName)&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-auto text-gray-400\",children:\"\\u2713\"})]},tagName);})})})]}),transaction.tags.length===0&&transaction.cleanMerchant.suggestedCategory!=='Other'&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleAddTag(transaction.cleanMerchant.suggestedCategory),className:\"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-blue-50 text-blue-700 hover:bg-blue-100 transition-colors\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-1\",children:(_TAG_CATEGORIES$trans=TAG_CATEGORIES[transaction.cleanMerchant.suggestedCategory])===null||_TAG_CATEGORIES$trans===void 0?void 0:_TAG_CATEGORIES$trans.icon}),\"Suggest: \",transaction.cleanMerchant.suggestedCategory]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"div\",{className:`text-sm font-semibold ${transaction.amount>0?'text-green-600':'text-red-600'}`,children:isPrivacyMode?/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[transaction.amount>0?'+':'',\"$\",Math.abs(transaction.amount).toLocaleString('en-US',{minimumFractionDigits:2})]})})})]})});};","map":{"version":3,"names":["React","useState","TAG_CATEGORIES","useFinancial","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TransactionItem","_ref","_TAG_CATEGORIES$trans","transaction","onAddTag","onRemoveTag","showAccountName","showTagging","className","isPrivacyMode","showTagDropdown","setShowTagDropdown","handleAddTag","tagName","tags","includes","id","handleRemoveTag","children","cleanMerchant","cleanName","original","date","accountId","pending","map","tag","tagInfo","color","icon","onClick","Object","entries","_ref2","disabled","length","suggestedCategory","amount","Math","abs","toLocaleString","minimumFractionDigits"],"sources":["C:/Users/dliz1/Desktop/FinanceApp/src/components/ui/TransactionItem.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Transaction } from '../../types/financial';\nimport { TAG_CATEGORIES } from '../../constants/financial';\nimport { useFinancial } from '../../contexts/FinancialContext';\n\ninterface TransactionItemProps {\n  transaction: Transaction;\n  onAddTag?: (transactionId: string, tag: string) => void;\n  onRemoveTag?: (transactionId: string, tag: string) => void;\n  showAccountName?: boolean;\n  showTagging?: boolean;\n  className?: string;\n}\n\nexport const TransactionItem: React.FC<TransactionItemProps> = ({\n  transaction,\n  onAddTag,\n  onRemoveTag,\n  showAccountName = false,\n  showTagging = true,\n  className = '',\n}) => {\n  const { isPrivacyMode } = useFinancial();\n  const [showTagDropdown, setShowTagDropdown] = useState(false);\n\n  const handleAddTag = (tagName: string) => {\n    if (onAddTag && !transaction.tags.includes(tagName)) {\n      onAddTag(transaction.id, tagName);\n      setShowTagDropdown(false);\n    }\n  };\n\n  const handleRemoveTag = (tagName: string) => {\n    if (onRemoveTag) {\n      onRemoveTag(transaction.id, tagName);\n    }\n  };\n\n  return (\n    <div className={`p-2 hover:bg-gray-50 transition-colors ${className}`}>\n      <div className=\"grid grid-cols-4 gap-4 items-center\">\n        {/* Column 1: Merchant Name - Left aligned */}\n        <div className=\"min-w-0 text-left\">\n          <div className=\"font-medium text-gray-900 truncate text-sm\">\n            {transaction.cleanMerchant.cleanName}\n          </div>\n          <div className=\"text-xs text-gray-500 truncate\">\n            {transaction.cleanMerchant.original}\n          </div>\n        </div>\n\n        {/* Column 2: Date and Account */}\n        <div className=\"min-w-0\">\n          <div className=\"text-sm text-gray-900\">{transaction.date}</div>\n          <div className=\"text-xs text-gray-500\">\n            {showAccountName ? transaction.accountId : ''}\n            {transaction.pending && (\n              <span className=\"ml-2 px-1.5 py-0.5 text-xs bg-yellow-100 text-yellow-800 rounded-full\">\n                Pending\n              </span>\n            )}\n          </div>\n        </div>\n\n        {/* Column 3: Tags */}\n        {showTagging && (\n          <div className=\"flex items-center space-x-1 flex-wrap\">\n            {transaction.tags.map((tag) => {\n              const tagInfo = TAG_CATEGORIES[tag];\n              return (\n                <span\n                  key={tag}\n                  className={`inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium group cursor-pointer ${\n                    tagInfo?.color || 'bg-gray-100 text-gray-800'\n                  }`}\n                >\n                  <span className=\"mr-1\">{tagInfo?.icon || 'üìù'}</span>\n                  {tag}\n                  <button\n                    onClick={() => handleRemoveTag(tag)}\n                    className=\"ml-1 text-current hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity\"\n                  >\n                    √ó\n                  </button>\n                </span>\n              );\n            })}\n\n            {/* Add Tag Button */}\n            <div className=\"relative\">\n              <button\n                onClick={() => setShowTagDropdown(!showTagDropdown)}\n                className=\"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors\"\n              >\n                + Tag\n              </button>\n\n              {/* Tag Dropdown */}\n              {showTagDropdown && (\n                <div className=\"absolute top-full left-0 mt-1 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-10\">\n                  <div className=\"p-2 max-h-48 overflow-y-auto\">\n                    {Object.entries(TAG_CATEGORIES).map(\n                      ([tagName, tagInfo]) => (\n                        <button\n                          key={tagName}\n                          onClick={() => handleAddTag(tagName)}\n                          className=\"w-full flex items-center px-2 py-1.5 text-xs rounded hover:bg-gray-50 text-left disabled:opacity-50\"\n                          disabled={transaction.tags.includes(tagName)}\n                        >\n                          <span className=\"mr-2\">{tagInfo.icon}</span>\n                          <span\n                            className={\n                              transaction.tags.includes(tagName)\n                                ? 'text-gray-400'\n                                : 'text-gray-700'\n                            }\n                          >\n                            {tagName}\n                          </span>\n                          {transaction.tags.includes(tagName) && (\n                            <span className=\"ml-auto text-gray-400\">‚úì</span>\n                          )}\n                        </button>\n                      )\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Auto-suggest tag if untagged */}\n            {transaction.tags.length === 0 &&\n              transaction.cleanMerchant.suggestedCategory !== 'Other' && (\n                <button\n                  onClick={() =>\n                    handleAddTag(transaction.cleanMerchant.suggestedCategory)\n                  }\n                  className=\"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-blue-50 text-blue-700 hover:bg-blue-100 transition-colors\"\n                >\n                  <span className=\"mr-1\">\n                    {\n                      TAG_CATEGORIES[\n                        transaction.cleanMerchant.suggestedCategory\n                      ]?.icon\n                    }\n                  </span>\n                  Suggest: {transaction.cleanMerchant.suggestedCategory}\n                </button>\n              )}\n          </div>\n        )}\n\n        {/* Column 4: Amount */}\n        <div className=\"text-right\">\n          <div\n            className={`text-sm font-semibold ${\n              transaction.amount > 0 ? 'text-green-600' : 'text-red-600'\n            }`}\n          >\n            {isPrivacyMode ? (\n              <span className=\"text-gray-400\">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>\n            ) : (\n              <>\n                {transaction.amount > 0 ? '+' : ''}$\n                {Math.abs(transaction.amount).toLocaleString('en-US', {\n                  minimumFractionDigits: 2,\n                })}\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}