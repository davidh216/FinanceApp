{"ast":null,"code":"import React,{useMemo}from'react';import{BaseChart}from'./BaseChart';import{processCategorySpendingData,CHART_COLORS}from'../../utils/chartUtils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const CategorySpendingChart=_ref=>{let{transactions,period,height=300,className='',onDataPointClick,loading=false,error=null}=_ref;const chartData=useMemo(()=>{const dataPoints=processCategorySpendingData(transactions,period);// Generate colors for categories\nconst colors=[CHART_COLORS.primary,CHART_COLORS.secondary,CHART_COLORS.accent,CHART_COLORS.danger,CHART_COLORS.warning,CHART_COLORS.info,CHART_COLORS.purple,CHART_COLORS.pink];return{labels:dataPoints.map(point=>point.label),datasets:[{label:'Spending by Category',data:dataPoints.map(point=>point.value),backgroundColor:colors.slice(0,dataPoints.length),borderColor:colors.slice(0,dataPoints.length).map(color=>color+'80'),borderWidth:2,hoverOffset:4}]};},[transactions,period]);const handleChartClick=(event,elements)=>{if(elements.length>0&&onDataPointClick){const dataIndex=elements[0].index;const dataPoints=processCategorySpendingData(transactions,period);onDataPointClick(dataPoints[dataIndex]);}};const customOptions={plugins:{title:{display:true,text:`Spending by Category - ${period.charAt(0).toUpperCase()+period.slice(1)}`,font:{size:16,weight:'bold'},color:'#374151',padding:{top:10,bottom:20}},legend:{position:'right',labels:{usePointStyle:true,padding:15,font:{size:11}}},tooltip:{callbacks:{label:function(context){const label=context.label||'';const value=context.parsed;const total=context.dataset.data.reduce((a,b)=>a+b,0);const percentage=(value/total*100).toFixed(1);return`${label}: $${value.toLocaleString()} (${percentage}%)`;}}}}};// Calculate summary statistics\nconst summary=useMemo(()=>{const dataPoints=processCategorySpendingData(transactions,period);const totalSpending=dataPoints.reduce((sum,point)=>sum+point.value,0);const topCategory=dataPoints[0];const topCategoryPercentage=totalSpending>0?topCategory.value/totalSpending*100:0;return{totalSpending,topCategory:(topCategory===null||topCategory===void 0?void 0:topCategory.label)||'None',topCategoryAmount:(topCategory===null||topCategory===void 0?void 0:topCategory.value)||0,topCategoryPercentage,categoryCount:dataPoints.length};},[transactions,period]);return/*#__PURE__*/_jsxs(\"div\",{className:`bg-white rounded-lg shadow-sm border p-6 ${className}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Spending by Category\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Breakdown of your expenses by category\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(BaseChart,{type:\"doughnut\",data:chartData,options:customOptions,height:height,onChartClick:handleChartClick,loading:loading,error:error})}),!loading&&!error&&/*#__PURE__*/_jsxs(\"div\",{className:\"lg:w-48 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-gray-900 mb-1\",children:[\"$\",summary.totalSpending.toLocaleString()]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Total Spending\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-semibold text-blue-900 mb-1\",children:summary.topCategory}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-blue-700\",children:[\"$\",summary.topCategoryAmount.toLocaleString(),\" (\",summary.topCategoryPercentage.toFixed(1),\"%)\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-blue-600\",children:\"Top Category\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-semibold text-gray-900 mb-1\",children:summary.categoryCount}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Categories\"})]})]})]}),!loading&&!error&&chartData.labels.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-center text-gray-500\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No spending data available for this period\"})})]});};","map":{"version":3,"names":["React","useMemo","BaseChart","processCategorySpendingData","CHART_COLORS","jsx","_jsx","jsxs","_jsxs","CategorySpendingChart","_ref","transactions","period","height","className","onDataPointClick","loading","error","chartData","dataPoints","colors","primary","secondary","accent","danger","warning","info","purple","pink","labels","map","point","label","datasets","data","value","backgroundColor","slice","length","borderColor","color","borderWidth","hoverOffset","handleChartClick","event","elements","dataIndex","index","customOptions","plugins","title","display","text","charAt","toUpperCase","font","size","weight","padding","top","bottom","legend","position","usePointStyle","tooltip","callbacks","context","parsed","total","dataset","reduce","a","b","percentage","toFixed","toLocaleString","summary","totalSpending","sum","topCategory","topCategoryPercentage","topCategoryAmount","categoryCount","children","type","options","onChartClick"],"sources":["C:/Users/X2DHHWAN/Desktop/Finance-App/src/components/charts/CategorySpendingChart.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\r\nimport { Transaction, TimePeriod } from '../../types/financial';\r\nimport { BaseChart } from './BaseChart';\r\nimport { processCategorySpendingData, CHART_COLORS } from '../../utils/chartUtils';\r\n\r\ninterface CategorySpendingChartProps {\r\n  transactions: Transaction[];\r\n  period: TimePeriod;\r\n  height?: string | number;\r\n  className?: string;\r\n  onDataPointClick?: (dataPoint: any) => void;\r\n  loading?: boolean;\r\n  error?: string | null;\r\n}\r\n\r\nexport const CategorySpendingChart: React.FC<CategorySpendingChartProps> = ({\r\n  transactions,\r\n  period,\r\n  height = 300,\r\n  className = '',\r\n  onDataPointClick,\r\n  loading = false,\r\n  error = null,\r\n}) => {\r\n  const chartData = useMemo(() => {\r\n    const dataPoints = processCategorySpendingData(transactions, period);\r\n    \r\n    // Generate colors for categories\r\n    const colors = [\r\n      CHART_COLORS.primary,\r\n      CHART_COLORS.secondary,\r\n      CHART_COLORS.accent,\r\n      CHART_COLORS.danger,\r\n      CHART_COLORS.warning,\r\n      CHART_COLORS.info,\r\n      CHART_COLORS.purple,\r\n      CHART_COLORS.pink,\r\n    ];\r\n    \r\n    return {\r\n      labels: dataPoints.map(point => point.label),\r\n      datasets: [\r\n        {\r\n          label: 'Spending by Category',\r\n          data: dataPoints.map(point => point.value),\r\n          backgroundColor: colors.slice(0, dataPoints.length),\r\n          borderColor: colors.slice(0, dataPoints.length).map(color => color + '80'),\r\n          borderWidth: 2,\r\n          hoverOffset: 4,\r\n        },\r\n      ],\r\n    };\r\n  }, [transactions, period]);\r\n\r\n  const handleChartClick = (event: any, elements: any[]) => {\r\n    if (elements.length > 0 && onDataPointClick) {\r\n      const dataIndex = elements[0].index;\r\n      const dataPoints = processCategorySpendingData(transactions, period);\r\n      onDataPointClick(dataPoints[dataIndex]);\r\n    }\r\n  };\r\n\r\n  const customOptions = {\r\n    plugins: {\r\n      title: {\r\n        display: true,\r\n        text: `Spending by Category - ${period.charAt(0).toUpperCase() + period.slice(1)}`,\r\n        font: {\r\n          size: 16,\r\n          weight: 'bold' as const,\r\n        },\r\n        color: '#374151',\r\n        padding: {\r\n          top: 10,\r\n          bottom: 20,\r\n        },\r\n      },\r\n      legend: {\r\n        position: 'right' as const,\r\n        labels: {\r\n          usePointStyle: true,\r\n          padding: 15,\r\n          font: {\r\n            size: 11,\r\n          },\r\n        },\r\n      },\r\n      tooltip: {\r\n        callbacks: {\r\n          label: function(context: any) {\r\n            const label = context.label || '';\r\n            const value = context.parsed;\r\n            const total = context.dataset.data.reduce((a: number, b: number) => a + b, 0);\r\n            const percentage = ((value / total) * 100).toFixed(1);\r\n            return `${label}: $${value.toLocaleString()} (${percentage}%)`;\r\n          },\r\n        },\r\n      },\r\n    },\r\n  };\r\n\r\n  // Calculate summary statistics\r\n  const summary = useMemo(() => {\r\n    const dataPoints = processCategorySpendingData(transactions, period);\r\n    const totalSpending = dataPoints.reduce((sum, point) => sum + point.value, 0);\r\n    const topCategory = dataPoints[0];\r\n    const topCategoryPercentage = totalSpending > 0 ? (topCategory.value / totalSpending) * 100 : 0;\r\n    \r\n    return {\r\n      totalSpending,\r\n      topCategory: topCategory?.label || 'None',\r\n      topCategoryAmount: topCategory?.value || 0,\r\n      topCategoryPercentage,\r\n      categoryCount: dataPoints.length,\r\n    };\r\n  }, [transactions, period]);\r\n\r\n  return (\r\n    <div className={`bg-white rounded-lg shadow-sm border p-6 ${className}`}>\r\n      <div className=\"mb-4\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n          Spending by Category\r\n        </h3>\r\n        <p className=\"text-sm text-gray-600\">\r\n          Breakdown of your expenses by category\r\n        </p>\r\n      </div>\r\n      \r\n      <div className=\"flex flex-col lg:flex-row gap-6\">\r\n        <div className=\"flex-1\">\r\n          <BaseChart\r\n            type=\"doughnut\"\r\n            data={chartData}\r\n            options={customOptions}\r\n            height={height}\r\n            onChartClick={handleChartClick}\r\n            loading={loading}\r\n            error={error}\r\n          />\r\n        </div>\r\n        \r\n        {!loading && !error && (\r\n          <div className=\"lg:w-48 space-y-4\">\r\n            <div className=\"bg-gray-50 rounded-lg p-4\">\r\n              <div className=\"text-2xl font-bold text-gray-900 mb-1\">\r\n                ${summary.totalSpending.toLocaleString()}\r\n              </div>\r\n              <div className=\"text-sm text-gray-600\">Total Spending</div>\r\n            </div>\r\n            \r\n            <div className=\"bg-blue-50 rounded-lg p-4\">\r\n              <div className=\"text-lg font-semibold text-blue-900 mb-1\">\r\n                {summary.topCategory}\r\n              </div>\r\n              <div className=\"text-sm text-blue-700\">\r\n                ${summary.topCategoryAmount.toLocaleString()} ({summary.topCategoryPercentage.toFixed(1)}%)\r\n              </div>\r\n              <div className=\"text-xs text-blue-600\">Top Category</div>\r\n            </div>\r\n            \r\n            <div className=\"bg-gray-50 rounded-lg p-4\">\r\n              <div className=\"text-lg font-semibold text-gray-900 mb-1\">\r\n                {summary.categoryCount}\r\n              </div>\r\n              <div className=\"text-sm text-gray-600\">Categories</div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      {!loading && !error && chartData.labels.length === 0 && (\r\n        <div className=\"mt-4 text-center text-gray-500\">\r\n          <p>No spending data available for this period</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}