{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useAuth}from'../../contexts/AuthContext';import{LoadingSpinner}from'../ui/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const ProtectedRoute=_ref=>{let{children,fallback}=_ref;const{currentUser,loading}=useAuth();const[isDemoMode,setIsDemoMode]=useState(false);const[isCheckingDemoMode,setIsCheckingDemoMode]=useState(true);// Check for demo mode on component mount\nuseEffect(()=>{const checkDemoMode=()=>{// Check if demo mode was activated from login\nconst demoMode=localStorage.getItem('financeapp-demo-mode');const urlParams=new URLSearchParams(window.location.search);const demoParam=urlParams.get('demo');if(demoMode==='true'||demoParam==='true'){setIsDemoMode(true);// Clear the demo flag from localStorage after reading\nlocalStorage.removeItem('financeapp-demo-mode');}setIsCheckingDemoMode(false);};checkDemoMode();},[]);// Show loading while checking demo mode\nif(isCheckingDemoMode){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading...\"})]})});}// Allow access if in demo mode\nif(isDemoMode){return/*#__PURE__*/_jsx(_Fragment,{children:children});}if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading...\"})]})});}if(!currentUser){return fallback?/*#__PURE__*/_jsx(_Fragment,{children:fallback}):/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Authentication Required\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-8\",children:\"Please sign in to access this page\"}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-md mx-auto\"})]})});}return/*#__PURE__*/_jsx(_Fragment,{children:children});};","map":{"version":3,"names":["React","useEffect","useState","useAuth","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProtectedRoute","_ref","children","fallback","currentUser","loading","isDemoMode","setIsDemoMode","isCheckingDemoMode","setIsCheckingDemoMode","checkDemoMode","demoMode","localStorage","getItem","urlParams","URLSearchParams","window","location","search","demoParam","get","removeItem","className","size"],"sources":["C:/Users/X2DHHWAN/Desktop/Finance-App/src/components/auth/ProtectedRoute.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { LoadingSpinner } from '../ui/LoadingSpinner';\r\n\r\ninterface ProtectedRouteProps {\r\n  children: React.ReactNode;\r\n  fallback?: React.ReactNode;\r\n}\r\n\r\nexport const ProtectedRoute: React.FC<ProtectedRouteProps> = ({ \r\n  children, \r\n  fallback \r\n}) => {\r\n  const { currentUser, loading } = useAuth();\r\n  const [isDemoMode, setIsDemoMode] = useState(false);\r\n  const [isCheckingDemoMode, setIsCheckingDemoMode] = useState(true);\r\n\r\n  // Check for demo mode on component mount\r\n  useEffect(() => {\r\n    const checkDemoMode = () => {\r\n      // Check if demo mode was activated from login\r\n      const demoMode = localStorage.getItem('financeapp-demo-mode');\r\n      const urlParams = new URLSearchParams(window.location.search);\r\n      const demoParam = urlParams.get('demo');\r\n      \r\n      if (demoMode === 'true' || demoParam === 'true') {\r\n        setIsDemoMode(true);\r\n        // Clear the demo flag from localStorage after reading\r\n        localStorage.removeItem('financeapp-demo-mode');\r\n      }\r\n      setIsCheckingDemoMode(false);\r\n    };\r\n\r\n    checkDemoMode();\r\n  }, []);\r\n\r\n  // Show loading while checking demo mode\r\n  if (isCheckingDemoMode) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <LoadingSpinner size=\"lg\" />\r\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Allow access if in demo mode\r\n  if (isDemoMode) {\r\n    return <>{children}</>;\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <LoadingSpinner size=\"lg\" />\r\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!currentUser) {\r\n    return fallback ? (\r\n      <>{fallback}</>\r\n    ) : (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <div className=\"text-center\">\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">\r\n            Authentication Required\r\n          </h1>\r\n          <p className=\"text-gray-600 mb-8\">\r\n            Please sign in to access this page\r\n          </p>\r\n          <div className=\"max-w-md mx-auto\">\r\n            {/* LoginForm will be rendered here by the parent component */}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <>{children}</>;\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}