{"ast":null,"code":"import React,{useMemo}from'react';import{BaseChart}from'./BaseChart';import{processIncomeExpenseData,CHART_COLORS}from'../../utils/chartUtils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const IncomeExpenseChart=_ref=>{let{transactions,period,height=300,className='',onDataPointClick,loading=false,error=null}=_ref;const chartData=useMemo(()=>{const{income,expenses}=processIncomeExpenseData(transactions,period);return{labels:income.map(point=>point.label),datasets:[{label:'Income',data:income.map(point=>point.value),backgroundColor:CHART_COLORS.success,borderColor:CHART_COLORS.success,borderWidth:1,borderRadius:4,borderSkipped:false},{label:'Expenses',data:expenses.map(point=>point.value),backgroundColor:CHART_COLORS.danger,borderColor:CHART_COLORS.danger,borderWidth:1,borderRadius:4,borderSkipped:false}]};},[transactions,period]);const handleChartClick=(event,elements)=>{if(elements.length>0&&onDataPointClick){const dataIndex=elements[0].index;const datasetIndex=elements[0].datasetIndex;const{income,expenses}=processIncomeExpenseData(transactions,period);const dataPoint=datasetIndex===0?income[dataIndex]:expenses[dataIndex];onDataPointClick({...dataPoint,type:datasetIndex===0?'income':'expense'});}};const customOptions={plugins:{title:{display:true,text:`Income vs Expenses - ${period.charAt(0).toUpperCase()+period.slice(1)}`,font:{size:16,weight:'bold'},color:'#374151',padding:{top:10,bottom:20}},tooltip:{callbacks:{label:function(context){const label=context.dataset.label||'';const value=context.parsed.y;return`${label}: $${value.toLocaleString()}`;}}}},scales:{x:{grid:{display:false}},y:{beginAtZero:true,grid:{color:'rgba(0, 0, 0, 0.1)'},ticks:{callback:function(value){return'$'+value.toLocaleString();}}}}};// Calculate summary statistics\nconst summary=useMemo(()=>{const{income,expenses}=processIncomeExpenseData(transactions,period);const totalIncome=income.reduce((sum,point)=>sum+point.value,0);const totalExpenses=expenses.reduce((sum,point)=>sum+point.value,0);const netFlow=totalIncome-totalExpenses;return{totalIncome,totalExpenses,netFlow,savingsRate:totalIncome>0?netFlow/totalIncome*100:0};},[transactions,period]);return/*#__PURE__*/_jsxs(\"div\",{className:`bg-white rounded-lg shadow-sm border p-6 ${className}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Income vs Expenses\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Compare your income and spending patterns\"})]}),/*#__PURE__*/_jsx(BaseChart,{type:\"bar\",data:chartData,options:customOptions,height:height,onChartClick:handleChartClick,loading:loading,error:error}),!loading&&!error&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600 font-medium\",children:\"Total Income\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-green-600 font-semibold\",children:[\"$\",summary.totalIncome.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600 font-medium\",children:\"Total Expenses\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-red-600 font-semibold\",children:[\"$\",summary.totalExpenses.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600 font-medium\",children:\"Net Flow\"}),/*#__PURE__*/_jsxs(\"div\",{className:`font-semibold ${summary.netFlow>=0?'text-green-600':'text-red-600'}`,children:[\"$\",summary.netFlow.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600 font-medium\",children:\"Savings Rate\"}),/*#__PURE__*/_jsxs(\"div\",{className:`font-semibold ${summary.savingsRate>=0?'text-green-600':'text-red-600'}`,children:[summary.savingsRate.toFixed(1),\"%\"]})]})]})]});};","map":{"version":3,"names":["React","useMemo","BaseChart","processIncomeExpenseData","CHART_COLORS","jsx","_jsx","jsxs","_jsxs","IncomeExpenseChart","_ref","transactions","period","height","className","onDataPointClick","loading","error","chartData","income","expenses","labels","map","point","label","datasets","data","value","backgroundColor","success","borderColor","borderWidth","borderRadius","borderSkipped","danger","handleChartClick","event","elements","length","dataIndex","index","datasetIndex","dataPoint","type","customOptions","plugins","title","display","text","charAt","toUpperCase","slice","font","size","weight","color","padding","top","bottom","tooltip","callbacks","context","dataset","parsed","y","toLocaleString","scales","x","grid","beginAtZero","ticks","callback","summary","totalIncome","reduce","sum","totalExpenses","netFlow","savingsRate","children","options","onChartClick","toFixed"],"sources":["C:/Users/X2DHHWAN/Desktop/Finance-App/src/components/charts/IncomeExpenseChart.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\r\nimport { Transaction, TimePeriod } from '../../types/financial';\r\nimport { BaseChart } from './BaseChart';\r\nimport { processIncomeExpenseData, CHART_COLORS } from '../../utils/chartUtils';\r\n\r\ninterface IncomeExpenseChartProps {\r\n  transactions: Transaction[];\r\n  period: TimePeriod;\r\n  height?: string | number;\r\n  className?: string;\r\n  onDataPointClick?: (dataPoint: any) => void;\r\n  loading?: boolean;\r\n  error?: string | null;\r\n}\r\n\r\nexport const IncomeExpenseChart: React.FC<IncomeExpenseChartProps> = ({\r\n  transactions,\r\n  period,\r\n  height = 300,\r\n  className = '',\r\n  onDataPointClick,\r\n  loading = false,\r\n  error = null,\r\n}) => {\r\n  const chartData = useMemo(() => {\r\n    const { income, expenses } = processIncomeExpenseData(transactions, period);\r\n    \r\n    return {\r\n      labels: income.map(point => point.label),\r\n      datasets: [\r\n        {\r\n          label: 'Income',\r\n          data: income.map(point => point.value),\r\n          backgroundColor: CHART_COLORS.success,\r\n          borderColor: CHART_COLORS.success,\r\n          borderWidth: 1,\r\n          borderRadius: 4,\r\n          borderSkipped: false,\r\n        },\r\n        {\r\n          label: 'Expenses',\r\n          data: expenses.map(point => point.value),\r\n          backgroundColor: CHART_COLORS.danger,\r\n          borderColor: CHART_COLORS.danger,\r\n          borderWidth: 1,\r\n          borderRadius: 4,\r\n          borderSkipped: false,\r\n        },\r\n      ],\r\n    };\r\n  }, [transactions, period]);\r\n\r\n  const handleChartClick = (event: any, elements: any[]) => {\r\n    if (elements.length > 0 && onDataPointClick) {\r\n      const dataIndex = elements[0].index;\r\n      const datasetIndex = elements[0].datasetIndex;\r\n      const { income, expenses } = processIncomeExpenseData(transactions, period);\r\n      const dataPoint = datasetIndex === 0 ? income[dataIndex] : expenses[dataIndex];\r\n      onDataPointClick({ ...dataPoint, type: datasetIndex === 0 ? 'income' : 'expense' });\r\n    }\r\n  };\r\n\r\n  const customOptions = {\r\n    plugins: {\r\n      title: {\r\n        display: true,\r\n        text: `Income vs Expenses - ${period.charAt(0).toUpperCase() + period.slice(1)}`,\r\n        font: {\r\n          size: 16,\r\n          weight: 'bold' as const,\r\n        },\r\n        color: '#374151',\r\n        padding: {\r\n          top: 10,\r\n          bottom: 20,\r\n        },\r\n      },\r\n      tooltip: {\r\n        callbacks: {\r\n          label: function(context: any) {\r\n            const label = context.dataset.label || '';\r\n            const value = context.parsed.y;\r\n            return `${label}: $${value.toLocaleString()}`;\r\n          },\r\n        },\r\n      },\r\n    },\r\n    scales: {\r\n      x: {\r\n        grid: {\r\n          display: false,\r\n        },\r\n      },\r\n      y: {\r\n        beginAtZero: true,\r\n        grid: {\r\n          color: 'rgba(0, 0, 0, 0.1)',\r\n        },\r\n        ticks: {\r\n          callback: function(value: any) {\r\n            return '$' + value.toLocaleString();\r\n          },\r\n        },\r\n      },\r\n    },\r\n  };\r\n\r\n  // Calculate summary statistics\r\n  const summary = useMemo(() => {\r\n    const { income, expenses } = processIncomeExpenseData(transactions, period);\r\n    const totalIncome = income.reduce((sum, point) => sum + point.value, 0);\r\n    const totalExpenses = expenses.reduce((sum, point) => sum + point.value, 0);\r\n    const netFlow = totalIncome - totalExpenses;\r\n    \r\n    return {\r\n      totalIncome,\r\n      totalExpenses,\r\n      netFlow,\r\n      savingsRate: totalIncome > 0 ? (netFlow / totalIncome) * 100 : 0,\r\n    };\r\n  }, [transactions, period]);\r\n\r\n  return (\r\n    <div className={`bg-white rounded-lg shadow-sm border p-6 ${className}`}>\r\n      <div className=\"mb-4\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n          Income vs Expenses\r\n        </h3>\r\n        <p className=\"text-sm text-gray-600\">\r\n          Compare your income and spending patterns\r\n        </p>\r\n      </div>\r\n      \r\n      <BaseChart\r\n        type=\"bar\"\r\n        data={chartData}\r\n        options={customOptions}\r\n        height={height}\r\n        onChartClick={handleChartClick}\r\n        loading={loading}\r\n        error={error}\r\n      />\r\n      \r\n      {!loading && !error && (\r\n        <div className=\"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-gray-600 font-medium\">Total Income</div>\r\n            <div className=\"text-green-600 font-semibold\">\r\n              ${summary.totalIncome.toLocaleString()}\r\n            </div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-gray-600 font-medium\">Total Expenses</div>\r\n            <div className=\"text-red-600 font-semibold\">\r\n              ${summary.totalExpenses.toLocaleString()}\r\n            </div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-gray-600 font-medium\">Net Flow</div>\r\n            <div className={`font-semibold ${summary.netFlow >= 0 ? 'text-green-600' : 'text-red-600'}`}>\r\n              ${summary.netFlow.toLocaleString()}\r\n            </div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-gray-600 font-medium\">Savings Rate</div>\r\n            <div className={`font-semibold ${summary.savingsRate >= 0 ? 'text-green-600' : 'text-red-600'}`}>\r\n              {summary.savingsRate.toFixed(1)}%\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}