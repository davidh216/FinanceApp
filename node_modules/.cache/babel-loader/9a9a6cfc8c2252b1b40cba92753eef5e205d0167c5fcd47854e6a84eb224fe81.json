{"ast":null,"code":"import React,{useState}from'react';import{VirtualizedTransactionList}from'../ui/VirtualizedTransactionList';import{Button}from'../ui/Button';import{useFinancial}from'../../contexts/FinancialContext';import{Eye,Filter,ArrowUpDown}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const RecentActivity=_ref=>{let{accounts,limit=5}=_ref;const[showFilters,setShowFilters]=useState(false);const[sortBy,setSortBy]=useState('date');const{addTag,removeTag,changeScreen}=useFinancial();// Get all transactions from all accounts\nconst allTransactions=accounts.flatMap(account=>{var _account$transactions;return((_account$transactions=account.transactions)===null||_account$transactions===void 0?void 0:_account$transactions.map(txn=>({...txn,accountName:account.name,accountType:account.type})))||[];}).sort((a,b)=>{if(sortBy==='date'){return new Date(b.date).getTime()-new Date(a.date).getTime();}else{return Math.abs(b.amount)-Math.abs(a.amount);}});// Use virtualized list for better performance with large datasets\nconst displayTransactions=allTransactions.slice(0,limit);const handleViewAll=()=>{changeScreen('transactions');};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 text-left\",children:\"Recent Activity\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSortBy(sortBy==='date'?'amount':'date'),className:\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors\",title:`Sort by ${sortBy==='date'?'amount':'date'}`,children:/*#__PURE__*/_jsx(ArrowUpDown,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowFilters(!showFilters),className:`p-2 rounded-md transition-colors ${showFilters?'text-blue-600 bg-blue-50':'text-gray-400 hover:text-gray-600 hover:bg-gray-100'}`,title:\"Toggle filters\",children:/*#__PURE__*/_jsx(Filter,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(Button,{leftIcon:/*#__PURE__*/_jsx(Eye,{className:\"w-4 h-4\"}),size:\"sm\",variant:\"outline\",onClick:handleViewAll,children:\"View All\"})]})]}),showFilters&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 p-2 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Type:\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"text-sm border border-gray-300 rounded px-2 py-1\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All\"}),/*#__PURE__*/_jsx(\"option\",{value:\"income\",children:\"Income\"}),/*#__PURE__*/_jsx(\"option\",{value:\"expense\",children:\"Expense\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Account:\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"text-sm border border-gray-300 rounded px-2 py-1\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Accounts\"}),accounts.map(account=>/*#__PURE__*/_jsx(\"option\",{value:account.id,children:account.name},account.id))]})]})]})]}),allTransactions.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 text-center text-gray-500\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83D\\uDCCB\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"No recent transactions found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400 mt-1\",children:\"Transactions will appear here once you connect accounts\"})]}):/*#__PURE__*/_jsx(VirtualizedTransactionList,{transactions:displayTransactions,height:400,itemHeight:72,onTransactionClick:transaction=>{// Handle transaction click - could open detail modal or navigate\nconsole.log('Transaction clicked:',transaction);}}),allTransactions.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-gray-50 border-t\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500\",children:[\"Showing \",displayTransactions.length,\" of \",allTransactions.length,\" total transactions\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleViewAll,className:\"text-blue-600 hover:text-blue-800 font-medium\",children:\"View all transactions \\u2192\"})]})})]});};","map":{"version":3,"names":["React","useState","VirtualizedTransactionList","Button","useFinancial","Eye","Filter","ArrowUpDown","jsx","_jsx","jsxs","_jsxs","RecentActivity","_ref","accounts","limit","showFilters","setShowFilters","sortBy","setSortBy","addTag","removeTag","changeScreen","allTransactions","flatMap","account","_account$transactions","transactions","map","txn","accountName","name","accountType","type","sort","a","b","Date","date","getTime","Math","abs","amount","displayTransactions","slice","handleViewAll","className","children","onClick","title","leftIcon","size","variant","value","id","length","height","itemHeight","onTransactionClick","transaction","console","log"],"sources":["C:/Users/X2DHHWAN/Desktop/Finance-App/src/components/dashboard/RecentActivity.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Account } from '../../types/financial';\r\nimport { VirtualizedTransactionList } from '../ui/VirtualizedTransactionList';\r\nimport { Button } from '../ui/Button';\r\nimport { useFinancial } from '../../contexts/FinancialContext';\r\nimport { Eye, Filter, ArrowUpDown } from 'lucide-react';\r\n\r\ninterface RecentActivityProps {\r\n  accounts: Account[];\r\n  limit?: number;\r\n}\r\n\r\nexport const RecentActivity: React.FC<RecentActivityProps> = ({\r\n  accounts,\r\n  limit = 5,\r\n}) => {\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  const [sortBy, setSortBy] = useState<'date' | 'amount'>('date');\r\n  const { addTag, removeTag, changeScreen } = useFinancial();\r\n\r\n  // Get all transactions from all accounts\r\n  const allTransactions = accounts\r\n    .flatMap(\r\n      (account) =>\r\n        account.transactions?.map((txn) => ({\r\n          ...txn,\r\n          accountName: account.name,\r\n          accountType: account.type,\r\n        })) || []\r\n    )\r\n    .sort((a, b) => {\r\n      if (sortBy === 'date') {\r\n        return new Date(b.date).getTime() - new Date(a.date).getTime();\r\n      } else {\r\n        return Math.abs(b.amount) - Math.abs(a.amount);\r\n      }\r\n    });\r\n\r\n  // Use virtualized list for better performance with large datasets\r\n  const displayTransactions = allTransactions.slice(0, limit);\r\n\r\n  const handleViewAll = () => {\r\n    changeScreen('transactions');\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-sm border\">\r\n      {/* Header */}\r\n      <div className=\"p-2 border-b border-gray-200\">\r\n        <div className=\"flex items-center justify-between mb-2\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-gray-900 text-left\">\r\n              Recent Activity\r\n            </h3>\r\n          </div>\r\n\r\n          <div className=\"flex items-center space-x-2\">\r\n            {/* Sort Toggle */}\r\n            <button\r\n              onClick={() => setSortBy(sortBy === 'date' ? 'amount' : 'date')}\r\n              className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors\"\r\n              title={`Sort by ${sortBy === 'date' ? 'amount' : 'date'}`}\r\n            >\r\n              <ArrowUpDown className=\"w-4 h-4\" />\r\n            </button>\r\n\r\n            {/* Filter Toggle */}\r\n            <button\r\n              onClick={() => setShowFilters(!showFilters)}\r\n              className={`p-2 rounded-md transition-colors ${\r\n                showFilters\r\n                  ? 'text-blue-600 bg-blue-50'\r\n                  : 'text-gray-400 hover:text-gray-600 hover:bg-gray-100'\r\n              }`}\r\n              title=\"Toggle filters\"\r\n            >\r\n              <Filter className=\"w-4 h-4\" />\r\n            </button>\r\n\r\n            {/* View All Button */}\r\n            <Button\r\n              leftIcon={<Eye className=\"w-4 h-4\" />}\r\n              size=\"sm\"\r\n              variant=\"outline\"\r\n              onClick={handleViewAll}\r\n            >\r\n              View All\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Quick Filters */}\r\n        {showFilters && (\r\n          <div className=\"flex items-center space-x-4 p-2 bg-gray-50 rounded-lg\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <label className=\"text-sm font-medium text-gray-700\">Type:</label>\r\n              <select className=\"text-sm border border-gray-300 rounded px-2 py-1\">\r\n                <option value=\"\">All</option>\r\n                <option value=\"income\">Income</option>\r\n                <option value=\"expense\">Expense</option>\r\n                <option value=\"pending\">Pending</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-2\">\r\n              <label className=\"text-sm font-medium text-gray-700\">\r\n                Account:\r\n              </label>\r\n              <select className=\"text-sm border border-gray-300 rounded px-2 py-1\">\r\n                <option value=\"\">All Accounts</option>\r\n                {accounts.map((account) => (\r\n                  <option key={account.id} value={account.id}>\r\n                    {account.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Transaction List */}\r\n      {allTransactions.length === 0 ? (\r\n        <div className=\"p-6 text-center text-gray-500\">\r\n          <div className=\"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n            <span className=\"text-2xl\">ðŸ“‹</span>\r\n          </div>\r\n          <p className=\"text-sm\">No recent transactions found</p>\r\n          <p className=\"text-xs text-gray-400 mt-1\">\r\n            Transactions will appear here once you connect accounts\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <VirtualizedTransactionList\r\n          transactions={displayTransactions}\r\n          height={400}\r\n          itemHeight={72}\r\n          onTransactionClick={(transaction) => {\r\n            // Handle transaction click - could open detail modal or navigate\r\n            console.log('Transaction clicked:', transaction);\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Footer */}\r\n      {allTransactions.length > 0 && (\r\n        <div className=\"p-2 bg-gray-50 border-t\">\r\n          <div className=\"flex items-center justify-between text-sm\">\r\n            <div className=\"text-gray-500\">\r\n              Showing {displayTransactions.length} of {allTransactions.length} total transactions\r\n            </div>\r\n            <button\r\n              onClick={handleViewAll}\r\n              className=\"text-blue-600 hover:text-blue-800 font-medium\"\r\n            >\r\n              View all transactions â†’\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}