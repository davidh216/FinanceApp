{"ast":null,"code":"// Update the KPISection component in src/components/dashboard/KPISection.tsx\nimport React from'react';import{KPICard}from'../ui/KPICard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const KPISection=_ref=>{let{summary,totalBalance,period,budgets=[],balanceTrend=[],incomeTrend=[],expenseTrend=[],savingsTrend=[]}=_ref;// Dynamic titles based on period\nconst getPeriodLabel=period=>{switch(period){case'day':return'Daily';case'week':return'Weekly';case'month':return'Monthly';case'quarter':return'Quarterly';case'year':return'Yearly';case'5year':return'5-Year';default:return'Monthly';}};const periodLabel=getPeriodLabel(period);// Calculate trend changes (mock for now, but you could calculate real trends)\nconst calculateTrendChange=(current,previous)=>{if(previous===0)return current>0?100:0;return(current-previous)/previous*100;};// Calculate previous period data for trend calculation\nconst prevIncome=summary.previousPeriodIncome||summary.monthlyIncome*0.9;const prevExpenses=summary.previousPeriodExpenses||summary.monthlyExpenses*1.1;const prevBalance=totalBalance*0.95;// Mock previous balance\n// Calculate value changes\nconst balanceValueChange=totalBalance-prevBalance;const incomeValueChange=summary.monthlyIncome-prevIncome;const expenseValueChange=summary.monthlyExpenses-prevExpenses;const savingsValueChange=summary.savingsRate*100-(prevIncome>0?(prevIncome-prevExpenses)/prevIncome:0)*100;// Calculate budget metrics\nconst activeBudgets=budgets.filter(budget=>budget.isActive);const totalBudgeted=activeBudgets.reduce((sum,budget)=>sum+budget.amount,0);const totalSpent=activeBudgets.reduce((sum,budget)=>sum+budget.spent,0);const overBudgetCategories=activeBudgets.filter(budget=>budget.spent>budget.amount).length;const budgetUtilization=totalBudgeted>0?totalSpent/totalBudgeted*100:0;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4\",children:[/*#__PURE__*/_jsx(KPICard,{title:\"Total Balance\",value:totalBalance,change:calculateTrendChange(totalBalance,prevBalance),valueChange:balanceValueChange,isPositive:totalBalance>=prevBalance,color:totalBalance<0?'red':'green',trendData:balanceTrend,period:period}),/*#__PURE__*/_jsx(KPICard,{title:`Income (${periodLabel})`,value:summary.monthlyIncome,change:calculateTrendChange(summary.monthlyIncome,prevIncome),valueChange:incomeValueChange,isPositive:summary.monthlyIncome>=prevIncome,color:\"green\",trendData:incomeTrend,period:period}),/*#__PURE__*/_jsx(KPICard,{title:`Spending (${periodLabel})`,value:summary.monthlyExpenses,change:calculateTrendChange(summary.monthlyExpenses,prevExpenses),valueChange:expenseValueChange,isPositive:summary.monthlyExpenses<=prevExpenses// Lower spending is better\n,color:\"red\",trendData:expenseTrend,period:period}),/*#__PURE__*/_jsx(KPICard,{title:\"Savings Rate\",value:summary.savingsRate*100,change:2.1// Mock change for now\n,valueChange:savingsValueChange,isPositive:true,isCurrency:false,color:\"blue\",trendData:savingsTrend,period:period})]}),activeBudgets.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Budget Overview\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4\",children:[/*#__PURE__*/_jsx(KPICard,{title:\"Total Budgeted\",value:totalBudgeted,change:0// No change calculation for now\n,valueChange:0,isPositive:true,color:\"blue\",period:period}),/*#__PURE__*/_jsx(KPICard,{title:\"Total Spent\",value:totalSpent,change:0,valueChange:0,isPositive:totalSpent<=totalBudgeted,color:totalSpent>totalBudgeted?'red':'green',period:period}),/*#__PURE__*/_jsx(KPICard,{title:\"Budget Utilization\",value:budgetUtilization,change:0,valueChange:0,isPositive:budgetUtilization<=100,isCurrency:false,color:budgetUtilization>100?'red':budgetUtilization>80?'orange':'green',period:period}),/*#__PURE__*/_jsx(KPICard,{title:\"Over Budget Categories\",value:overBudgetCategories,change:0,valueChange:0,isPositive:overBudgetCategories===0,isCurrency:false,color:overBudgetCategories>0?'red':'green',period:period})]})]})]});};","map":{"version":3,"names":["React","KPICard","jsx","_jsx","jsxs","_jsxs","KPISection","_ref","summary","totalBalance","period","budgets","balanceTrend","incomeTrend","expenseTrend","savingsTrend","getPeriodLabel","periodLabel","calculateTrendChange","current","previous","prevIncome","previousPeriodIncome","monthlyIncome","prevExpenses","previousPeriodExpenses","monthlyExpenses","prevBalance","balanceValueChange","incomeValueChange","expenseValueChange","savingsValueChange","savingsRate","activeBudgets","filter","budget","isActive","totalBudgeted","reduce","sum","amount","totalSpent","spent","overBudgetCategories","length","budgetUtilization","children","className","title","value","change","valueChange","isPositive","color","trendData","isCurrency"],"sources":["C:/Users/X2DHHWAN/Desktop/Finance-App/src/components/dashboard/KPISection.tsx"],"sourcesContent":["// Update the KPISection component in src/components/dashboard/KPISection.tsx\r\n\r\nimport React from 'react';\r\nimport { KPICard } from '../ui/KPICard';\r\nimport { FinancialSummary, TimePeriod, Budget } from '../../types/financial';\r\n\r\ninterface KPISectionProps {\r\n  summary: FinancialSummary;\r\n  totalBalance: number;\r\n  period: TimePeriod;\r\n  budgets?: Budget[];\r\n  balanceTrend?: number[];\r\n  incomeTrend?: number[];\r\n  expenseTrend?: number[];\r\n  savingsTrend?: number[];\r\n}\r\n\r\nexport const KPISection: React.FC<KPISectionProps> = ({\r\n  summary,\r\n  totalBalance,\r\n  period,\r\n  budgets = [],\r\n  balanceTrend = [],\r\n  incomeTrend = [],\r\n  expenseTrend = [],\r\n  savingsTrend = [],\r\n}) => {\r\n  // Dynamic titles based on period\r\n  const getPeriodLabel = (period: TimePeriod): string => {\r\n    switch (period) {\r\n      case 'day':\r\n        return 'Daily';\r\n      case 'week':\r\n        return 'Weekly';\r\n      case 'month':\r\n        return 'Monthly';\r\n      case 'quarter':\r\n        return 'Quarterly';\r\n      case 'year':\r\n        return 'Yearly';\r\n      case '5year':\r\n        return '5-Year';\r\n      default:\r\n        return 'Monthly';\r\n    }\r\n  };\r\n\r\n  const periodLabel = getPeriodLabel(period);\r\n\r\n  // Calculate trend changes (mock for now, but you could calculate real trends)\r\n  const calculateTrendChange = (current: number, previous: number): number => {\r\n    if (previous === 0) return current > 0 ? 100 : 0;\r\n    return ((current - previous) / previous) * 100;\r\n  };\r\n\r\n  // Calculate previous period data for trend calculation\r\n  const prevIncome =\r\n    summary.previousPeriodIncome || summary.monthlyIncome * 0.9;\r\n  const prevExpenses =\r\n    summary.previousPeriodExpenses || summary.monthlyExpenses * 1.1;\r\n  const prevBalance = totalBalance * 0.95; // Mock previous balance\r\n\r\n  // Calculate value changes\r\n  const balanceValueChange = totalBalance - prevBalance;\r\n  const incomeValueChange = summary.monthlyIncome - prevIncome;\r\n  const expenseValueChange = summary.monthlyExpenses - prevExpenses;\r\n  const savingsValueChange =\r\n    summary.savingsRate * 100 -\r\n    (prevIncome > 0 ? (prevIncome - prevExpenses) / prevIncome : 0) * 100;\r\n\r\n  // Calculate budget metrics\r\n  const activeBudgets = budgets.filter(budget => budget.isActive);\r\n  const totalBudgeted = activeBudgets.reduce((sum, budget) => sum + budget.amount, 0);\r\n  const totalSpent = activeBudgets.reduce((sum, budget) => sum + budget.spent, 0);\r\n  const overBudgetCategories = activeBudgets.filter(budget => budget.spent > budget.amount).length;\r\n  const budgetUtilization = totalBudgeted > 0 ? (totalSpent / totalBudgeted) * 100 : 0;\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4\">\r\n        <KPICard\r\n          title=\"Total Balance\"\r\n          value={totalBalance}\r\n          change={calculateTrendChange(totalBalance, prevBalance)}\r\n          valueChange={balanceValueChange}\r\n          isPositive={totalBalance >= prevBalance}\r\n          color={totalBalance < 0 ? 'red' : 'green'}\r\n          trendData={balanceTrend}\r\n          period={period}\r\n        />\r\n\r\n        <KPICard\r\n          title={`Income (${periodLabel})`}\r\n          value={summary.monthlyIncome}\r\n          change={calculateTrendChange(summary.monthlyIncome, prevIncome)}\r\n          valueChange={incomeValueChange}\r\n          isPositive={summary.monthlyIncome >= prevIncome}\r\n          color=\"green\"\r\n          trendData={incomeTrend}\r\n          period={period}\r\n        />\r\n\r\n        <KPICard\r\n          title={`Spending (${periodLabel})`}\r\n          value={summary.monthlyExpenses}\r\n          change={calculateTrendChange(summary.monthlyExpenses, prevExpenses)}\r\n          valueChange={expenseValueChange}\r\n          isPositive={summary.monthlyExpenses <= prevExpenses} // Lower spending is better\r\n          color=\"red\"\r\n          trendData={expenseTrend}\r\n          period={period}\r\n        />\r\n\r\n        <KPICard\r\n          title=\"Savings Rate\"\r\n          value={summary.savingsRate * 100}\r\n          change={2.1} // Mock change for now\r\n          valueChange={savingsValueChange}\r\n          isPositive={true}\r\n          isCurrency={false}\r\n          color=\"blue\"\r\n          trendData={savingsTrend}\r\n          period={period}\r\n        />\r\n      </div>\r\n\r\n      {/* Budget KPIs - Show only if there are active budgets */}\r\n      {activeBudgets.length > 0 && (\r\n        <div className=\"mt-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Budget Overview</h3>\r\n          <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4\">\r\n            <KPICard\r\n              title=\"Total Budgeted\"\r\n              value={totalBudgeted}\r\n              change={0} // No change calculation for now\r\n              valueChange={0}\r\n              isPositive={true}\r\n              color=\"blue\"\r\n              period={period}\r\n            />\r\n\r\n            <KPICard\r\n              title=\"Total Spent\"\r\n              value={totalSpent}\r\n              change={0}\r\n              valueChange={0}\r\n              isPositive={totalSpent <= totalBudgeted}\r\n              color={totalSpent > totalBudgeted ? 'red' : 'green'}\r\n              period={period}\r\n            />\r\n\r\n            <KPICard\r\n              title=\"Budget Utilization\"\r\n              value={budgetUtilization}\r\n              change={0}\r\n              valueChange={0}\r\n              isPositive={budgetUtilization <= 100}\r\n              isCurrency={false}\r\n              color={budgetUtilization > 100 ? 'red' : budgetUtilization > 80 ? 'orange' : 'green'}\r\n              period={period}\r\n            />\r\n\r\n            <KPICard\r\n              title=\"Over Budget Categories\"\r\n              value={overBudgetCategories}\r\n              change={0}\r\n              valueChange={0}\r\n              isPositive={overBudgetCategories === 0}\r\n              isCurrency={false}\r\n              color={overBudgetCategories > 0 ? 'red' : 'green'}\r\n              period={period}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}