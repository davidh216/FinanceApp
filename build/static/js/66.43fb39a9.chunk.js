"use strict";(self.webpackChunkfinanceapp=self.webpackChunkfinanceapp||[]).push([[66],{66:(e,s,t)=>{t.r(s),t.d(s,{RecentActivity:()=>p});var a=t(5043),n=t(4192),l=t(5683),r=t(3388),c=t(1490),i=t(9256),o=t(6547),d=t(7604),x=t(579);const m=e=>{let{transactions:s,height:t=400,itemHeight:m=72,className:u="",onTransactionClick:g,loading:h=!1,error:p=null}=e;const[y,j]=(0,a.useState)(""),[b,v]=(0,a.useState)({key:"date",direction:"desc"}),[N,f]=(0,a.useState)(!1),[w,C]=(0,a.useState)("all"),[k,A]=(0,a.useState)("all"),T=(0,a.useMemo)(()=>["all",...[...new Set(s.map(e=>e.category))].sort()],[s]),S=(0,a.useMemo)(()=>{let e=s.filter(e=>{const s=""===y||e.description.toLowerCase().includes(y.toLowerCase())||e.category.toLowerCase().includes(y.toLowerCase()),t="all"===w||e.category===w;let a=!0;return"income"===k?a=e.amount>0:"expense"===k&&(a=e.amount<0),s&&t&&a});return e.sort((e,s)=>{const t=e[b.key],a=s[b.key];if("string"===typeof t&&"string"===typeof a){const e=t.localeCompare(a);return"asc"===b.direction?e:-e}if("number"===typeof t&&"number"===typeof a){const e=t-a;return"asc"===b.direction?e:-e}if(t instanceof Date&&a instanceof Date){const e=t.getTime()-a.getTime();return"asc"===b.direction?e:-e}return 0}),e},[s,y,b,w,k]),M=(0,a.useCallback)(e=>{v(s=>({key:e,direction:s.key===e&&"asc"===s.direction?"desc":"asc"}))},[]),D=(0,a.useCallback)(e=>{let{index:s,style:t}=e;const a=S[s];return a?(0,x.jsx)("div",{style:t,children:(0,x.jsx)(l.U,{transaction:a,onClick:()=>null===g||void 0===g?void 0:g(a),className:"border-b border-gray-100 last:border-b-0"})}):null},[S,g]);return h?(0,x.jsx)("div",{className:`bg-white rounded-lg shadow-sm border ${u}`,children:(0,x.jsx)("div",{className:"p-4",children:(0,x.jsx)("div",{className:"animate-pulse space-y-3",children:Array.from({length:5}).map((e,s)=>(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-full"}),(0,x.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,x.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,x.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),(0,x.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20"})]},s))})})}):p?(0,x.jsx)("div",{className:`bg-white rounded-lg shadow-sm border ${u}`,children:(0,x.jsx)("div",{className:"p-4 text-center text-red-600",children:(0,x.jsxs)("p",{children:["Error loading transactions: ",p]})})}):(0,x.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border ${u}`,children:[(0,x.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,x.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Transactions (",S.length,")"]}),(0,x.jsxs)(r.$,{onClick:()=>f(!N),variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[(0,x.jsx)(c.A,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:"Filters"})]})]}),(0,x.jsxs)("div",{className:"relative mb-4",children:[(0,x.jsx)(i.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,x.jsx)("input",{type:"text",placeholder:"Search transactions...",value:y,onChange:e=>j(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),N&&(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,x.jsx)("select",{value:w,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:T.map(e=>(0,x.jsx)("option",{value:e,children:"all"===e?"All Categories":e},e))})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Type"}),(0,x.jsxs)("select",{value:k,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,x.jsx)("option",{value:"all",children:"All Transactions"}),(0,x.jsx)("option",{value:"income",children:"Income Only"}),(0,x.jsx)("option",{value:"expense",children:"Expenses Only"})]})]}),(0,x.jsx)("div",{className:"flex items-end",children:(0,x.jsx)(r.$,{onClick:()=>{j(""),C("all"),A("all")},variant:"outline",size:"sm",children:"Clear Filters"})})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,x.jsx)("span",{className:"text-gray-600",children:"Sort by:"}),(0,x.jsxs)("button",{onClick:()=>M("date"),className:"flex items-center space-x-1 px-2 py-1 rounded "+("date"===b.key?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:[(0,x.jsx)("span",{children:"Date"}),"date"===b.key&&("asc"===b.direction?(0,x.jsx)(o.A,{className:"w-3 h-3"}):(0,x.jsx)(d.A,{className:"w-3 h-3"}))]}),(0,x.jsxs)("button",{onClick:()=>M("amount"),className:"flex items-center space-x-1 px-2 py-1 rounded "+("amount"===b.key?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:[(0,x.jsx)("span",{children:"Amount"}),"amount"===b.key&&("asc"===b.direction?(0,x.jsx)(o.A,{className:"w-3 h-3"}):(0,x.jsx)(d.A,{className:"w-3 h-3"}))]}),(0,x.jsxs)("button",{onClick:()=>M("category"),className:"flex items-center space-x-1 px-2 py-1 rounded "+("category"===b.key?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:[(0,x.jsx)("span",{children:"Category"}),"category"===b.key&&("asc"===b.direction?(0,x.jsx)(o.A,{className:"w-3 h-3"}):(0,x.jsx)(d.A,{className:"w-3 h-3"}))]})]})]}),0===S.length?(0,x.jsx)("div",{className:"p-8 text-center text-gray-500",children:(0,x.jsx)("p",{children:"No transactions found matching your criteria."})}):(0,x.jsx)("div",{style:{height:t},children:(0,x.jsx)(n.Y1,{height:t,itemCount:S.length,itemSize:m,width:"100%",children:D})})]})};var u=t(7395),g=t(536),h=t(8775);const p=e=>{let{accounts:s,limit:t=5}=e;const[n,l]=(0,a.useState)(!1),[i,o]=(0,a.useState)("date"),{addTag:d,removeTag:p,changeScreen:y}=(0,u.x)(),j=s.flatMap(e=>{var s;return(null===(s=e.transactions)||void 0===s?void 0:s.map(s=>({...s,accountName:e.name,accountType:e.type})))||[]}).sort((e,s)=>"date"===i?new Date(s.date).getTime()-new Date(e.date).getTime():Math.abs(s.amount)-Math.abs(e.amount)),b=j.slice(0,t),v=()=>{y("transactions")};return(0,x.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,x.jsxs)("div",{className:"p-2 border-b border-gray-200",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,x.jsx)("div",{children:(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 text-left",children:"Recent Activity"})}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("button",{onClick:()=>o("date"===i?"amount":"date"),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",title:"Sort by "+("date"===i?"amount":"date"),children:(0,x.jsx)(g.A,{className:"w-4 h-4"})}),(0,x.jsx)("button",{onClick:()=>l(!n),className:"p-2 rounded-md transition-colors "+(n?"text-blue-600 bg-blue-50":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"),title:"Toggle filters",children:(0,x.jsx)(c.A,{className:"w-4 h-4"})}),(0,x.jsx)(r.$,{leftIcon:(0,x.jsx)(h.A,{className:"w-4 h-4"}),size:"sm",variant:"outline",onClick:v,children:"View All"})]})]}),n&&(0,x.jsxs)("div",{className:"flex items-center space-x-4 p-2 bg-gray-50 rounded-lg",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Type:"}),(0,x.jsxs)("select",{className:"text-sm border border-gray-300 rounded px-2 py-1",children:[(0,x.jsx)("option",{value:"",children:"All"}),(0,x.jsx)("option",{value:"income",children:"Income"}),(0,x.jsx)("option",{value:"expense",children:"Expense"}),(0,x.jsx)("option",{value:"pending",children:"Pending"})]})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Account:"}),(0,x.jsxs)("select",{className:"text-sm border border-gray-300 rounded px-2 py-1",children:[(0,x.jsx)("option",{value:"",children:"All Accounts"}),s.map(e=>(0,x.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})]}),0===j.length?(0,x.jsxs)("div",{className:"p-6 text-center text-gray-500",children:[(0,x.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,x.jsx)("span",{className:"text-2xl",children:"\ud83d\udccb"})}),(0,x.jsx)("p",{className:"text-sm",children:"No recent transactions found"}),(0,x.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Transactions will appear here once you connect accounts"})]}):(0,x.jsx)(m,{transactions:b,height:400,itemHeight:72,onTransactionClick:e=>{console.log("Transaction clicked:",e)}}),j.length>0&&(0,x.jsx)("div",{className:"p-2 bg-gray-50 border-t",children:(0,x.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,x.jsxs)("div",{className:"text-gray-500",children:["Showing ",b.length," of ",j.length," total transactions"]}),(0,x.jsx)("button",{onClick:v,className:"text-blue-600 hover:text-blue-800 font-medium",children:"View all transactions \u2192"})]})})]})}},5683:(e,s,t)=>{t.d(s,{U:()=>c});var a=t(5043),n=t(3979),l=t(7395),r=t(579);const c=a.memo(e=>{var s;let{transaction:t,onAddTag:c,onRemoveTag:i,showAccountName:o=!1,showTagging:d=!0,className:x="",onClick:m}=e;const{isPrivacyMode:u}=(0,l.x)(),[g,h]=(0,a.useState)(!1),p=e=>{c&&!t.tags.includes(e)&&(c(t.id,e),h(!1))};return(0,r.jsx)("div",{className:`p-2 hover:bg-gray-50 transition-colors cursor-pointer ${x}`,onClick:m,children:(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4 items-center",children:[(0,r.jsxs)("div",{className:"min-w-0 text-left",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900 truncate text-sm",children:t.cleanMerchant.cleanName}),(0,r.jsx)("div",{className:"text-xs text-gray-500 truncate",children:t.cleanMerchant.original})]}),(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("div",{className:"text-sm text-gray-900",children:t.date}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[o?t.accountId:"",t.pending&&(0,r.jsx)("span",{className:"ml-2 px-1.5 py-0.5 text-xs bg-yellow-100 text-yellow-800 rounded-full",children:"Pending"})]})]}),d&&(0,r.jsxs)("div",{className:"flex items-center space-x-1 flex-wrap",children:[t.tags.map(e=>{const s=n.QD[e];return(0,r.jsxs)("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium group cursor-pointer ${(null===s||void 0===s?void 0:s.color)||"bg-gray-100 text-gray-800"}`,children:[(0,r.jsx)("span",{className:"mr-1",children:(null===s||void 0===s?void 0:s.icon)||"\ud83d\udcdd"}),e,(0,r.jsx)("button",{onClick:()=>{return s=e,void(i&&i(t.id,s));var s},className:"ml-1 text-current hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"\xd7"})]},e)}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>h(!g),className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",children:"+ Tag"}),g&&(0,r.jsx)("div",{className:"absolute top-full left-0 mt-1 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:(0,r.jsx)("div",{className:"p-2 max-h-48 overflow-y-auto",children:Object.entries(n.QD).map(e=>{let[s,a]=e;return(0,r.jsxs)("button",{onClick:()=>p(s),className:"w-full flex items-center px-2 py-1.5 text-xs rounded hover:bg-gray-50 text-left disabled:opacity-50",disabled:t.tags.includes(s),children:[(0,r.jsx)("span",{className:"mr-2",children:a.icon}),(0,r.jsx)("span",{className:t.tags.includes(s)?"text-gray-400":"text-gray-700",children:s}),t.tags.includes(s)&&(0,r.jsx)("span",{className:"ml-auto text-gray-400",children:"\u2713"})]},s)})})})]}),0===t.tags.length&&"Other"!==t.cleanMerchant.suggestedCategory&&(0,r.jsxs)("button",{onClick:()=>p(t.cleanMerchant.suggestedCategory),className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-blue-50 text-blue-700 hover:bg-blue-100 transition-colors",children:[(0,r.jsx)("span",{className:"mr-1",children:null===(s=n.QD[t.cleanMerchant.suggestedCategory])||void 0===s?void 0:s.icon}),"Suggest: ",t.cleanMerchant.suggestedCategory]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)("div",{className:"text-sm font-semibold "+(t.amount>0?"text-green-600":"text-red-600"),children:u?(0,r.jsx)("span",{className:"text-gray-400",children:"\u2022\u2022\u2022\u2022\u2022\u2022"}):(0,r.jsxs)(r.Fragment,{children:[t.amount>0?"+":"","$",Math.abs(t.amount).toLocaleString("en-US",{minimumFractionDigits:2})]})})})]})})},(e,s)=>e.transaction.id===s.transaction.id&&e.transaction.amount===s.transaction.amount&&e.transaction.tags.length===s.transaction.tags.length&&e.showAccountName===s.showAccountName&&e.showTagging===s.showTagging&&e.className===s.className);c.displayName="TransactionItem"}}]);
//# sourceMappingURL=66.43fb39a9.chunk.js.map