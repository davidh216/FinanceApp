"use strict";(self.webpackChunkfinanceapp=self.webpackChunkfinanceapp||[]).push([[977],{2543:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(3797).A)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},8358:(e,t,a)=>{a.r(t),a.d(t,{BudgetForm:()=>p});var s=a(5043),r=a(2537),l=a(3388),n=a(9915),d=a(1172),i=a(2543),o=a(2380),c=a(8283);const u=(0,a(3797).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var m=a(579);const x=["Food & Dining","Transportation","Shopping","Entertainment","Utilities","Healthcare","Education","Travel","Insurance","Other"],g=[{value:"week",label:"Weekly",days:7},{value:"month",label:"Monthly",days:30},{value:"quarter",label:"Quarterly",days:90},{value:"year",label:"Yearly",days:365}],p=e=>{let{budget:t,onSave:a,onCancel:p,isOpen:h}=e;const{createBudget:y,updateBudget:b,isCreating:v,isUpdating:j,error:f}=(0,r.l)(),[N,D]=(0,s.useState)({category:"",amount:"",period:"month",startDate:"",endDate:"",isActive:!0}),[w,k]=(0,s.useState)([]),[A,C]=(0,s.useState)({});(0,s.useEffect)(()=>{if(t)D({category:t.category,amount:t.amount.toString(),period:t.period,startDate:t.startDate.split("T")[0],endDate:t.endDate.split("T")[0],isActive:t.isActive}),k(t.alerts);else{const e=new Date,t=new Date;t.setDate(e.getDate()+30),D({category:"",amount:"",period:"month",startDate:e.toISOString().split("T")[0],endDate:t.toISOString().split("T")[0],isActive:!0}),k([])}C({})},[t]);const S=(e,t,a)=>{k(s=>s.map((s,r)=>r===e?{...s,[t]:a}:s))};return h?(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,m.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,m.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:t?"Edit Budget":"Create New Budget"}),(0,m.jsx)("button",{onClick:p,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,m.jsx)(d.A,{className:"w-6 h-6"})})]})}),(0,m.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};if(N.category.trim()||(e.category="Category is required"),(!N.amount||parseFloat(N.amount)<=0)&&(e.amount="Amount must be greater than 0"),N.startDate||(e.startDate="Start date is required"),N.endDate||(e.endDate="End date is required"),N.startDate&&N.endDate){const t=new Date(N.startDate);new Date(N.endDate)<=t&&(e.endDate="End date must be after start date")}return C(e),0===Object.keys(e).length})())try{const e={category:N.category,amount:parseFloat(N.amount),period:N.period,startDate:new Date(N.startDate).toISOString(),endDate:new Date(N.endDate).toISOString(),spent:(null===t||void 0===t?void 0:t.spent)||0,remaining:(null===t||void 0===t?void 0:t.remaining)||parseFloat(N.amount),alerts:w,isActive:N.isActive};if(t){const s=await b(t.id,e);null===a||void 0===a||a(s)}else{const t=await y(e);null===a||void 0===a||a(t)}}catch(s){console.error("Error saving budget:",s)}},className:"p-6 space-y-6",children:[f&&(0,m.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)(i.A,{className:"w-5 h-5 text-red-400"}),(0,m.jsx)("p",{className:"text-red-800",children:f})]})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),(0,m.jsxs)("select",{value:N.category,onChange:e=>D(t=>({...t,category:e.target.value})),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 "+(A.category?"border-red-300":"border-gray-300"),children:[(0,m.jsx)("option",{value:"",children:"Select a category"}),x.map(e=>(0,m.jsx)("option",{value:e,children:e},e))]}),A.category&&(0,m.jsx)("p",{className:"mt-1 text-sm text-red-600",children:A.category})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget Amount *"}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("span",{className:"absolute left-3 top-2 text-gray-500",children:"$"}),(0,m.jsx)("input",{type:"number",value:N.amount,onChange:e=>D(t=>({...t,amount:e.target.value})),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 "+(A.amount?"border-red-300":"border-gray-300")})]}),A.amount&&(0,m.jsx)("p",{className:"mt-1 text-sm text-red-600",children:A.amount})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget Period"}),(0,m.jsx)("div",{className:"grid grid-cols-2 gap-3",children:g.map(e=>(0,m.jsxs)("button",{type:"button",onClick:()=>(e=>{const t=g.find(t=>t.value===e);if(t&&N.startDate){const a=new Date(N.startDate),s=new Date(a);s.setDate(a.getDate()+t.days),D(t=>({...t,period:e,endDate:s.toISOString().split("T")[0]}))}})(e.value),className:"p-3 border rounded-lg text-left transition-colors "+(N.period===e.value?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-300 hover:border-gray-400"),children:[(0,m.jsx)("div",{className:"font-medium",children:e.label}),(0,m.jsxs)("div",{className:"text-sm text-gray-500",children:[e.days," days"]})]},e.value))})]}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),(0,m.jsx)("input",{type:"date",value:N.startDate,onChange:e=>D(t=>({...t,startDate:e.target.value})),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 "+(A.startDate?"border-red-300":"border-gray-300")}),A.startDate&&(0,m.jsx)("p",{className:"mt-1 text-sm text-red-600",children:A.startDate})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date *"}),(0,m.jsx)("input",{type:"date",value:N.endDate,onChange:e=>D(t=>({...t,endDate:e.target.value})),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 "+(A.endDate?"border-red-300":"border-gray-300")}),A.endDate&&(0,m.jsx)("p",{className:"mt-1 text-sm text-red-600",children:A.endDate})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Budget Alerts"}),(0,m.jsxs)(l.$,{type:"button",onClick:()=>{k(e=>[...e,{id:`alert-${Date.now()}`,type:"warning",threshold:80,message:"You're approaching your budget limit",triggered:!1,createdAt:(new Date).toISOString()}])},size:"sm",className:"flex items-center space-x-2",children:[(0,m.jsx)(o.A,{className:"w-4 h-4"}),(0,m.jsx)("span",{children:"Add Alert"})]})]}),0===w.length?(0,m.jsxs)("div",{className:"text-center py-6 border-2 border-dashed border-gray-300 rounded-lg",children:[(0,m.jsx)(c.A,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),(0,m.jsx)("p",{className:"text-gray-500",children:"No alerts configured"}),(0,m.jsx)("p",{className:"text-sm text-gray-400",children:"Add alerts to get notified about budget progress"})]}):(0,m.jsx)("div",{className:"space-y-3",children:w.map((e,t)=>(0,m.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,m.jsxs)("h4",{className:"font-medium text-gray-900",children:["Alert ",t+1]}),(0,m.jsx)("button",{type:"button",onClick:()=>(e=>{k(t=>t.filter((t,a)=>a!==e))})(t),className:"text-red-500 hover:text-red-700",children:(0,m.jsx)(u,{className:"w-4 h-4"})})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,m.jsxs)("select",{value:e.type,onChange:e=>S(t,"type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,m.jsx)("option",{value:"warning",children:"Warning"}),(0,m.jsx)("option",{value:"danger",children:"Danger"}),(0,m.jsx)("option",{value:"info",children:"Info"})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Threshold (%)"}),(0,m.jsx)("input",{type:"number",value:e.threshold,onChange:e=>S(t,"threshold",parseInt(e.target.value)),min:"1",max:"100",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),(0,m.jsx)("input",{type:"text",value:e.message,onChange:e=>S(t,"message",e.target.value),placeholder:"Alert message",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]})]},t))})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,m.jsx)("input",{type:"checkbox",id:"isActive",checked:N.isActive,onChange:e=>D(t=>({...t,isActive:e.target.checked})),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),(0,m.jsx)("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700",children:"Active Budget"})]}),(0,m.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,m.jsx)(l.$,{type:"button",variant:"outline",onClick:p,disabled:v||j,children:"Cancel"}),(0,m.jsxs)(l.$,{type:"submit",disabled:v||j,className:"flex items-center space-x-2",children:[(v||j)&&(0,m.jsx)(n.kt,{size:"sm"}),(0,m.jsx)("span",{children:t?"Update Budget":"Create Budget"})]})]})]})]})}):null}}}]);
//# sourceMappingURL=977.f520c4a9.chunk.js.map