"use strict";(self.webpackChunkfinanceapp=self.webpackChunkfinanceapp||[]).push([[210],{2537:(e,t,a)=>{a.d(t,{l:()=>d});var r=a(5043),s=a(6667),n=a(3826);class o{constructor(){this.budgets=[],this.alerts=[],this.generateMockBudgets()}generateMockBudgets(){const e=["month","quarter","year"];["Food & Dining","Transportation","Shopping","Entertainment","Utilities","Healthcare"].forEach((t,a)=>{const r=e[a%e.length],s=1e3*Math.random()+200,n=Math.random()*s;this.budgets.push({id:`budget-${a}`,userId:"mock-user",category:t,amount:s,period:r,startDate:(new Date).toISOString(),endDate:new Date(Date.now()+2592e6).toISOString(),spent:n,remaining:s-n,alerts:[],isActive:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()})})}async createBudget(e){await new Promise(e=>setTimeout(e,200));const t={...e,id:`budget-${Date.now()}`,userId:"mock-user",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return this.budgets.push(t),t}async getBudgets(e){return await new Promise(e=>setTimeout(e,100)),this.budgets.filter(t=>t.userId===e)}async getBudget(e){return await new Promise(e=>setTimeout(e,50)),this.budgets.find(t=>t.id===e)||null}async updateBudget(e,t){await new Promise(e=>setTimeout(e,200));const a=this.budgets.findIndex(t=>t.id===e);if(-1===a)throw new Error("Budget not found");return this.budgets[a]={...this.budgets[a],...t,updatedAt:(new Date).toISOString()},this.budgets[a]}async deleteBudget(e){await new Promise(e=>setTimeout(e,200));const t=this.budgets.findIndex(t=>t.id===e);return-1!==t&&(this.budgets.splice(t,1),!0)}async getBudgetProgress(e){await new Promise(e=>setTimeout(e,100));const t=this.budgets.find(t=>t.id===e);if(!t)throw new Error("Budget not found");const a=t.spent/t.amount*100,r=t.spent>t.amount,s=Math.ceil((new Date(t.endDate).getTime()-(new Date).getTime())/864e5),n=t.spent+t.spent/(30-s)*s;return{budgetId:e,spent:t.spent,remaining:t.remaining,percentageUsed:a,isOverBudget:r,daysRemaining:Math.max(0,s),projectedSpending:n}}async getBudgetSummary(e){await new Promise(e=>setTimeout(e,100));const t=this.budgets.filter(t=>t.userId===e&&t.isActive),a=t.reduce((e,t)=>e+t.amount,0),r=t.reduce((e,t)=>e+t.spent,0),s=a-r,n=t.filter(e=>e.spent>e.amount).map(e=>e.category),o=this.alerts.filter(e=>t.some(t=>t.id===e.id&&!e.triggered));return{totalBudgets:t.length,totalBudgeted:a,totalSpent:r,totalRemaining:s,overBudgetCategories:n,upcomingAlerts:o}}async calculateBudgetSpending(e,t){await new Promise(e=>setTimeout(e,50));const a=this.budgets.find(t=>t.id===e);if(!a)return 0;const r=t.filter(e=>e.category===a.category&&new Date(e.date)>=new Date(a.startDate)&&new Date(e.date)<=new Date(a.endDate)&&e.amount<0);return Math.abs(r.reduce((e,t)=>e+t.amount,0))}async createBudgetAlert(e,t){await new Promise(e=>setTimeout(e,100));const a={...t,id:`alert-${Date.now()}`,createdAt:(new Date).toISOString()};return this.alerts.push(a),a}async getBudgetAlerts(e){return await new Promise(e=>setTimeout(e,50)),this.alerts.filter(t=>t.id===e)}async updateBudgetAlert(e,t){await new Promise(e=>setTimeout(e,100));const a=this.alerts.findIndex(t=>t.id===e);if(-1===a)throw new Error("Alert not found");return this.alerts[a]={...this.alerts[a],...t},this.alerts[a]}subscribeToBudgets(e,t){return setTimeout(()=>{const a=this.budgets.filter(t=>t.userId===e);t(a)},100),()=>{}}subscribeToBudgetProgress(e,t){return setTimeout(async()=>{const a=await this.getBudgetProgress(e);t(a)},100),()=>{}}}class l{constructor(e,t){this.config=void 0,this.userId=void 0,this.config=e,this.userId=t}getUserBudgetsCollection(){return(0,s.rJ)(n.db,"users",this.userId,"budgets")}getBudgetDocRef(e){return(0,s.H9)(n.db,"users",this.userId,"budgets",e)}convertTimestamp(e){return"string"===typeof e?e:e.toDate().toISOString()}convertToTimestamp(e){return s.Dc.fromDate(new Date(e))}convertFirestoreToBudget(e){const t=e.data();return{id:e.id,userId:t.userId,category:t.category,amount:t.amount,period:t.period,startDate:this.convertTimestamp(t.startDate),endDate:this.convertTimestamp(t.endDate),spent:t.spent||0,remaining:t.remaining||t.amount,alerts:t.alerts||[],isActive:!1!==t.isActive,createdAt:this.convertTimestamp(t.createdAt||(0,s.O5)()),updatedAt:this.convertTimestamp(t.updatedAt||(0,s.O5)())}}async createBudget(e){try{const t=this.getUserBudgetsCollection(),a={...e,userId:this.userId,createdAt:(0,s.O5)(),updatedAt:(0,s.O5)()},r=await(0,s.gS)(t,a),n=await(0,s.x7)(r);if(n.exists())return this.convertFirestoreToBudget(n);throw new Error("Failed to create budget")}catch(t){throw console.error("Error creating budget:",t),new Error("Failed to create budget")}}async getBudgets(e){try{const e=this.getUserBudgetsCollection();return(await(0,s.GG)(e)).docs.map(e=>this.convertFirestoreToBudget(e))}catch(t){throw console.error("Error fetching budgets:",t),new Error("Failed to fetch budgets")}}async getBudget(e){try{const t=this.getBudgetDocRef(e),a=await(0,s.x7)(t);return a.exists()?this.convertFirestoreToBudget(a):null}catch(t){throw console.error("Error fetching budget:",t),new Error("Failed to fetch budget")}}async updateBudget(e,t){try{const a=this.getBudgetDocRef(e),r={...t,updatedAt:(0,s.O5)()};await(0,s.mZ)(a,r);const n=await(0,s.x7)(a);if(n.exists())return this.convertFirestoreToBudget(n);throw new Error("Budget not found")}catch(a){throw console.error("Error updating budget:",a),new Error("Failed to update budget")}}async deleteBudget(e){try{const t=this.getBudgetDocRef(e);return await(0,s.kd)(t),!0}catch(t){throw console.error("Error deleting budget:",t),new Error("Failed to delete budget")}}async getBudgetProgress(e){try{const t=await this.getBudget(e);if(!t)throw new Error("Budget not found");const a=t.spent/t.amount*100,r=t.spent>t.amount,s=Math.ceil((new Date(t.endDate).getTime()-(new Date).getTime())/864e5),n=t.spent+t.spent/(30-s)*s;return{budgetId:e,spent:t.spent,remaining:t.remaining,percentageUsed:a,isOverBudget:r,daysRemaining:Math.max(0,s),projectedSpending:n}}catch(t){throw console.error("Error calculating budget progress:",t),new Error("Failed to calculate budget progress")}}async getBudgetSummary(e){try{const t=(await this.getBudgets(e)).filter(e=>e.isActive),a=t.reduce((e,t)=>e+t.amount,0),r=t.reduce((e,t)=>e+t.spent,0),s=a-r,n=t.filter(e=>e.spent>e.amount).map(e=>e.category),o=t.flatMap(e=>e.alerts.filter(e=>!e.triggered));return{totalBudgets:t.length,totalBudgeted:a,totalSpent:r,totalRemaining:s,overBudgetCategories:n,upcomingAlerts:o}}catch(t){throw console.error("Error calculating budget summary:",t),new Error("Failed to calculate budget summary")}}async calculateBudgetSpending(e,t){try{const a=await this.getBudget(e);if(!a)return 0;const r=t.filter(e=>e.category===a.category&&new Date(e.date)>=new Date(a.startDate)&&new Date(e.date)<=new Date(a.endDate)&&e.amount<0);return Math.abs(r.reduce((e,t)=>e+t.amount,0))}catch(a){throw console.error("Error calculating budget spending:",a),new Error("Failed to calculate budget spending")}}async createBudgetAlert(e,t){try{const a=await this.getBudget(e);if(!a)throw new Error("Budget not found");const r={...t,id:`alert-${Date.now()}`,createdAt:(new Date).toISOString()},s=[...a.alerts,r];return await this.updateBudget(e,{alerts:s}),r}catch(a){throw console.error("Error creating budget alert:",a),new Error("Failed to create budget alert")}}async getBudgetAlerts(e){try{const t=await this.getBudget(e);return(null===t||void 0===t?void 0:t.alerts)||[]}catch(t){throw console.error("Error fetching budget alerts:",t),new Error("Failed to fetch budget alerts")}}async updateBudgetAlert(e,t){try{const a=(await this.getBudgets(this.userId)).find(t=>t.alerts.some(t=>t.id===e));if(!a)throw new Error("Alert not found");const r=a.alerts.map(a=>a.id===e?{...a,...t}:a);await this.updateBudget(a.id,{alerts:r});const s=r.find(t=>t.id===e);if(!s)throw new Error("Failed to update alert");return s}catch(a){throw console.error("Error updating budget alert:",a),new Error("Failed to update budget alert")}}subscribeToBudgets(e,t){const a=this.getUserBudgetsCollection();return(0,s.aQ)(a,e=>{const a=e.docs.map(e=>this.convertFirestoreToBudget(e));t(a)})}subscribeToBudgetProgress(e,t){const a=this.getBudgetDocRef(e);return(0,s.aQ)(a,async a=>{if(a.exists()){const a=await this.getBudgetProgress(e);t(a)}})}}function i(e,t){if(e.useMockData)return new o;if(!t)throw new Error("User ID is required for Firebase BudgetService");return new l(e,t)}var c=a(9066);const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{currentUser:t}=(0,c.A)(),[a,s]=(0,r.useState)([]),[n,o]=(0,r.useState)(null),[l,d]=(0,r.useState)(null),[u,g]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[x,p]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),[f,w]=(0,r.useState)(null),v=(0,r.useMemo)(()=>{var a;if(null===t||void 0===t||!t.id)return null;return i({useMockData:null===(a=e.useMockData)||void 0===a||a},t.id)},[null===t||void 0===t?void 0:t.id,e.useMockData]);(0,r.useEffect)(()=>{if(!v||null===t||void 0===t||!t.id)return;(async()=>{g(!0),w(null);try{const[e,a]=await Promise.all([v.getBudgets(t.id),v.getBudgetSummary(t.id)]);s(e),o(a)}catch(e){w(e instanceof Error?e.message:"Failed to load budgets")}finally{g(!1)}})();return v.subscribeToBudgets(t.id,e=>{s(e)})},[v,null===t||void 0===t?void 0:t.id]);const j=(0,r.useCallback)(async e=>{if(!v)throw new Error("Budget service not available");h(!0),w(null);try{const a=await v.createBudget(e);if(s(e=>[...e,a]),null!==t&&void 0!==t&&t.id){const e=await v.getBudgetSummary(t.id);o(e)}return a}catch(a){const e=a instanceof Error?a.message:"Failed to create budget";throw w(e),new Error(e)}finally{h(!1)}},[v,null===t||void 0===t?void 0:t.id]),N=(0,r.useCallback)(async(e,a)=>{if(!v)throw new Error("Budget service not available");p(!0),w(null);try{const r=await v.updateBudget(e,a);if(s(t=>t.map(t=>t.id===e?r:t)),(null===l||void 0===l?void 0:l.id)===e&&d(r),null!==t&&void 0!==t&&t.id){const e=await v.getBudgetSummary(t.id);o(e)}return r}catch(r){const e=r instanceof Error?r.message:"Failed to update budget";throw w(e),new Error(e)}finally{p(!1)}},[v,null===t||void 0===t?void 0:t.id,l]),D=(0,r.useCallback)(async e=>{if(!v)throw new Error("Budget service not available");y(!0),w(null);try{const a=await v.deleteBudget(e);if(a&&(s(t=>t.filter(t=>t.id!==e)),(null===l||void 0===l?void 0:l.id)===e&&d(null),null!==t&&void 0!==t&&t.id)){const e=await v.getBudgetSummary(t.id);o(e)}return a}catch(a){const e=a instanceof Error?a.message:"Failed to delete budget";throw w(e),new Error(e)}finally{y(!1)}},[v,null===t||void 0===t?void 0:t.id,l]),k=(0,r.useCallback)(e=>{d(e)},[]),B=(0,r.useCallback)(async e=>{if(!v)throw new Error("Budget service not available");return await v.getBudgetProgress(e)},[v]),S=(0,r.useCallback)(async(e,t)=>{if(!v)throw new Error("Budget service not available");return await v.calculateBudgetSpending(e,t)},[v]),C=(0,r.useCallback)(async(e,t)=>{if(!v)throw new Error("Budget service not available");return await v.createBudgetAlert(e,t)},[v]),E=(0,r.useCallback)(async e=>{if(!v)throw new Error("Budget service not available");return await v.getBudgetAlerts(e)},[v]),A=(0,r.useCallback)(async(e,t)=>{if(!v)throw new Error("Budget service not available");return await v.updateBudgetAlert(e,t)},[v]),M=(0,r.useCallback)(async()=>{if(v&&null!==t&&void 0!==t&&t.id){g(!0),w(null);try{const[e,a]=await Promise.all([v.getBudgets(t.id),v.getBudgetSummary(t.id)]);s(e),o(a)}catch(e){w(e instanceof Error?e.message:"Failed to refresh budgets")}finally{g(!1)}}},[v,null===t||void 0===t?void 0:t.id]),T=(0,r.useCallback)(()=>{w(null)},[]);return{budgets:a,budgetSummary:n,selectedBudget:l,isLoading:u,isCreating:m,isUpdating:x,isDeleting:b,error:f,createBudget:j,updateBudget:N,deleteBudget:D,selectBudget:k,getBudgetProgress:B,calculateBudgetSpending:S,createBudgetAlert:C,getBudgetAlerts:E,updateBudgetAlert:A,refreshBudgets:M,clearError:T}}},4498:(e,t,a)=>{a.d(t,{a:()=>D});var r=a(5043),s=a(7395),n=a(1176),o=a(6691),l=a(8756),i=a(1329),c=a(2938),d=a(1172),u=a(4725),g=a(8432),m=a(3388),h=a(579);const x=[{label:"Today",getRange:()=>({startDate:(0,n.o)(new Date),endDate:(0,o.D)(new Date)})},{label:"Yesterday",getRange:()=>({startDate:(0,n.o)((0,l.e)(new Date,1)),endDate:(0,o.D)((0,l.e)(new Date,1))})},{label:"Last 7 days",getRange:()=>({startDate:(0,n.o)((0,l.e)(new Date,6)),endDate:(0,o.D)(new Date)})},{label:"Last 30 days",getRange:()=>({startDate:(0,n.o)((0,l.e)(new Date,29)),endDate:(0,o.D)(new Date)})},{label:"Last 90 days",getRange:()=>({startDate:(0,n.o)((0,l.e)(new Date,89)),endDate:(0,o.D)(new Date)})},{label:"This month",getRange:()=>({startDate:(0,n.o)(new Date((new Date).getFullYear(),(new Date).getMonth(),1)),endDate:(0,o.D)(new Date)})},{label:"Last month",getRange:()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth()-1,1);return{startDate:(0,n.o)(t),endDate:(0,o.D)(new Date(e.getFullYear(),e.getMonth(),0))}}}],p=e=>{let{value:t,onChange:a,onClose:s,className:n=""}=e;const[o,l]=(0,r.useState)(!1),[p,b]=(0,r.useState)(t||null),[y,f]=(0,r.useState)(new Date),w=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=e=>{w.current&&!w.current.contains(e.target)&&(l(!1),null===s||void 0===s||s())};return o&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o,s]),(0,r.useEffect)(()=>{t&&b(t)},[t]);const v=e=>{f(t=>{const a=new Date(t);return"prev"===e?a.setMonth(a.getMonth()-1):a.setMonth(a.getMonth()+1),a})},j=e=>!!p&&(e>=p.startDate&&e<=p.endDate),N=e=>!!p&&((0,i.GP)(e,"yyyy-MM-dd")===(0,i.GP)(p.startDate,"yyyy-MM-dd")||(0,i.GP)(e,"yyyy-MM-dd")===(0,i.GP)(p.endDate,"yyyy-MM-dd")),D=t?`${(0,i.GP)(t.startDate,"MMM dd")} - ${(0,i.GP)(t.endDate,"MMM dd")}`:"Select date range";return(0,h.jsxs)("div",{className:`relative ${n}`,ref:w,children:[(0,h.jsxs)(m.$,{variant:"outline",onClick:()=>l(!o),className:"flex items-center space-x-2 min-w-[200px] justify-between",children:[(0,h.jsx)(c.A,{className:"w-4 h-4"}),(0,h.jsx)("span",{className:"truncate",children:D}),t&&(0,h.jsx)(d.A,{className:"w-4 h-4 text-gray-400 hover:text-gray-600",onClick:e=>{e.stopPropagation(),b(null),a({startDate:new Date,endDate:new Date,label:"Custom"}),l(!1)}})]}),o&&(0,h.jsx)("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-[600px]",children:(0,h.jsx)("div",{className:"p-4",children:(0,h.jsxs)("div",{className:"flex gap-4",children:[(0,h.jsxs)("div",{className:"w-48 border-r border-gray-200 pr-4",children:[(0,h.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Quick Select"}),(0,h.jsx)("div",{className:"space-y-2",children:x.map(e=>(0,h.jsx)("button",{onClick:()=>(e=>{const t={...e.getRange(),label:e.label};b(t),a(t),l(!1)})(e),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:e.label},e.label))})]}),(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,h.jsx)("button",{onClick:()=>v("prev"),className:"p-1 hover:bg-gray-100 rounded",children:(0,h.jsx)(u.A,{className:"w-4 h-4"})}),(0,h.jsx)("h3",{className:"font-medium text-gray-900",children:(0,i.GP)(y,"MMMM yyyy")}),(0,h.jsx)("button",{onClick:()=>v("next"),className:"p-1 hover:bg-gray-100 rounded",children:(0,h.jsx)(g.A,{className:"w-4 h-4"})})]}),(0,h.jsxs)("div",{className:"grid grid-cols-7 gap-1 mb-4",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,h.jsx)("div",{className:"text-center text-xs font-medium text-gray-500 py-2",children:e},e)),(e=>{const t=e.getFullYear(),a=e.getMonth(),r=new Date(t,a,1),s=new Date(t,a+1,0).getDate(),n=r.getDay(),o=[];for(let l=0;l<n;l++)o.push(null);for(let l=1;l<=s;l++)o.push(new Date(t,a,l));return o})(y).map((e,t)=>(0,h.jsx)("div",{className:"text-center",children:e?(0,h.jsx)("button",{onClick:()=>(e=>{p?e<p.startDate?b({...p,startDate:e}):b({...p,endDate:e}):b({startDate:e,endDate:e,label:"Custom"})})(e),className:"w-8 h-8 text-sm rounded-full transition-colors "+(N(e)?"bg-blue-600 text-white":j(e)?"bg-blue-100 text-blue-900":"hover:bg-gray-100"),children:e.getDate()}):(0,h.jsx)("div",{className:"w-8 h-8"})},t))]}),p&&(0,h.jsxs)("div",{className:"text-sm text-gray-600 mb-4",children:[(0,h.jsxs)("div",{children:["Start: ",(0,i.GP)(p.startDate,"MMM dd, yyyy")]}),(0,h.jsxs)("div",{children:["End: ",(0,i.GP)(p.endDate,"MMM dd, yyyy")]})]}),(0,h.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,h.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>{b(t||null),l(!1),null===s||void 0===s||s()},children:"Cancel"}),(0,h.jsx)(m.$,{variant:"primary",size:"sm",onClick:()=>{p&&(a(p),l(!1))},disabled:!p,children:"Apply"})]})]})]})})})]})};var b=a(9755),y=a(8775),f=a(7834);const w=e=>{let{className:t=""}=e;const[a,s]=(0,r.useState)("light"),[n,o]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=localStorage.getItem("finance-app-theme");e&&(s(e),l(e))},[]);const l=e=>{const t=document.documentElement;switch(t.classList.remove("theme-light","theme-dark","theme-high-contrast"),t.classList.add(`theme-${e}`),e){case"dark":t.style.setProperty("--bg-primary","#1f2937"),t.style.setProperty("--bg-secondary","#374151"),t.style.setProperty("--text-primary","#f9fafb"),t.style.setProperty("--text-secondary","#d1d5db"),t.style.setProperty("--border-color","#4b5563");break;case"high-contrast":t.style.setProperty("--bg-primary","#000000"),t.style.setProperty("--bg-secondary","#ffffff"),t.style.setProperty("--text-primary","#ffffff"),t.style.setProperty("--text-secondary","#000000"),t.style.setProperty("--border-color","#ffffff");break;default:t.style.setProperty("--bg-primary","#ffffff"),t.style.setProperty("--bg-secondary","#f9fafb"),t.style.setProperty("--text-primary","#1f2937"),t.style.setProperty("--text-secondary","#6b7280"),t.style.setProperty("--border-color","#e5e7eb")}localStorage.setItem("finance-app-theme",e)},i=e=>{switch(e){case"dark":return(0,h.jsx)(b.A,{className:"w-4 h-4"});case"high-contrast":return(0,h.jsx)(y.A,{className:"w-4 h-4"});default:return(0,h.jsx)(f.A,{className:"w-4 h-4"})}},c=e=>{switch(e){case"dark":return"Dark Mode";case"high-contrast":return"High Contrast";default:return"Light Mode"}};return(0,h.jsxs)("div",{className:`relative ${t}`,children:[(0,h.jsxs)(m.$,{onClick:()=>o(!n),variant:"outline",size:"sm",className:"flex items-center space-x-2","aria-label":"Toggle theme","aria-expanded":n,"aria-haspopup":"true",children:[i(a),(0,h.jsx)("span",{children:"Theme"})]}),n&&(0,h.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:(0,h.jsx)("div",{className:"py-1",children:["light","dark","high-contrast"].map(e=>(0,h.jsxs)("button",{onClick:()=>{return s(t=e),l(t),void o(!1);var t},className:"w-full flex items-center space-x-3 px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors "+(a===e?"bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-300":""),"aria-label":`Switch to ${c(e)}`,children:[i(e),(0,h.jsx)("span",{children:c(e)}),a===e&&(0,h.jsx)("div",{className:"ml-auto w-2 h-2 bg-blue-600 rounded-full"})]},e))})}),n&&(0,h.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1),"aria-hidden":"true"})]})};if("undefined"!==typeof document){const e=document.createElement("style");e.textContent="\n  :root {\n    --bg-primary: #ffffff;\n    --bg-secondary: #f9fafb;\n    --text-primary: #1f2937;\n    --text-secondary: #6b7280;\n    --border-color: #e5e7eb;\n  }\n\n  .theme-dark {\n    --bg-primary: #1f2937;\n    --bg-secondary: #374151;\n    --text-primary: #f9fafb;\n    --text-secondary: #d1d5db;\n    --border-color: #4b5563;\n  }\n\n  .theme-high-contrast {\n    --bg-primary: #000000;\n    --bg-secondary: #ffffff;\n    --text-primary: #ffffff;\n    --text-secondary: #000000;\n    --border-color: #ffffff;\n  }\n\n  /* Apply theme variables to common elements */\n  body {\n    background-color: var(--bg-primary);\n    color: var(--text-primary);\n  }\n\n  .bg-white {\n    background-color: var(--bg-primary);\n  }\n\n  .bg-gray-50 {\n    background-color: var(--bg-secondary);\n  }\n\n  .text-gray-900 {\n    color: var(--text-primary);\n  }\n\n  .text-gray-600 {\n    color: var(--text-secondary);\n  }\n\n  .border-gray-200 {\n    border-color: var(--border-color);\n  }\n\n  /* High contrast specific styles */\n  .theme-high-contrast * {\n    border-width: 2px !important;\n  }\n\n  .theme-high-contrast button,\n  .theme-high-contrast input,\n  .theme-high-contrast select {\n    border: 2px solid var(--border-color) !important;\n  }\n\n  .theme-high-contrast .focus\\:ring-2:focus {\n    box-shadow: 0 0 0 4px var(--border-color) !important;\n  }\n",document.head.appendChild(e)}var v=a(4068),j=a(5923),N=a(8283);const D=()=>{const{state:e,setCustomDateRange:t,isPrivacyMode:a,togglePrivacyMode:n,accountFilter:o,setAccountFilter:l}=(0,s.x)(),[i,c]=(0,r.useState)(!1);return(0,h.jsxs)("header",{className:"bg-white shadow-sm border-b sticky top-0 z-40",children:[(0,h.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,h.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,h.jsx)("div",{className:"flex items-center",children:(0,h.jsxs)("div",{className:"flex-shrink-0 flex items-center",children:[(0,h.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center mr-3",children:(0,h.jsx)("span",{className:"text-white font-bold text-sm",children:"F"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"FinanceApp"}),(0,h.jsx)("div",{className:"flex items-center",children:(0,h.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded",children:"DEMO"})})]})]})}),e.accounts.length>0&&(0,h.jsxs)("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[(0,h.jsx)("button",{onClick:()=>l("personal"),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-all "+("personal"===o?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-800"),children:"Personal"}),(0,h.jsx)("button",{onClick:()=>l("business"),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-all "+("business"===o?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-800"),children:"Business"}),(0,h.jsx)("button",{onClick:()=>l("both"),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-all "+("both"===o?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-800"),children:"Both"})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,h.jsx)(w,{}),(0,h.jsx)("button",{onClick:()=>{alert("Refreshing data...")},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors",title:"Refresh data",children:(0,h.jsx)(v.A,{className:"w-5 h-5"})}),(0,h.jsx)("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors",title:a?"Show amounts":"Hide amounts",children:a?(0,h.jsx)(j.A,{className:"w-5 h-5"}):(0,h.jsx)(y.A,{className:"w-5 h-5"})}),(0,h.jsxs)("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors relative",children:[(0,h.jsx)(N.A,{className:"w-5 h-5"}),(0,h.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),(0,h.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:(0,h.jsx)("span",{className:"text-white text-sm font-medium",children:"JD"})})]})]})}),(0,h.jsx)(p,{value:e.customDateRange?{startDate:new Date(e.customDateRange.startDate),endDate:new Date(e.customDateRange.endDate),label:e.customDateRange.label}:void 0,onChange:e=>{t(e.startDate.toISOString(),e.endDate.toISOString(),e.label)},onClose:()=>c(!1)})]})}},6210:(e,t,a)=>{a.r(t),a.d(t,{Dashboard:()=>me});var r=a(5043),s=a(7395),n=a(4498),o=a(3979),l=a(3388),i=a(9915),c=a(1676),d=a(2380),u=a(7008),g=a(8147),m=a(7304),h=a(6058),x=a(579);m.t1.register(m.PP,m.kc,m.FN,m.No,m.E8,m.Bs,m.hE,m.m_,m.s$,m.dN);const p=e=>{let{type:t,data:a,options:s={},height:n=400,width:o="100%",className:l="",onChartClick:i,loading:c=!1,error:d=null}=e;const u=(0,r.useRef)(null),[g,m]=(0,r.useState)(null);(0,r.useEffect)(()=>{u.current&&m(u.current)},[]);const p=(e,t)=>{i&&i(e,t)},b={...(()=>{const e={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,padding:20,font:{size:12},color:"#374151"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{label:function(e){return`${e.dataset.label||""}: $${(e.parsed.y||e.parsed).toLocaleString()}`}}}},onClick:p};switch(t){case"line":return{...e,scales:{x:{grid:{display:!1},ticks:{maxRotation:45,color:"#6B7280"}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"},ticks:{color:"#6B7280",callback:function(e){return"$"+e.toLocaleString()}}}},elements:{point:{radius:4,hoverRadius:6},line:{tension:.4}}};case"bar":return{...e,scales:{x:{grid:{display:!1},ticks:{color:"#6B7280"}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"},ticks:{color:"#6B7280",callback:function(e){return"$"+e.toLocaleString()}}}}};case"doughnut":case"pie":return{...e,cutout:"doughnut"===t?"60%":void 0,plugins:{...e.plugins,legend:{...e.plugins.legend,position:"right"},tooltip:{...e.plugins.tooltip,callbacks:{label:function(e){const t=e.label||"",a=e.parsed,r=(a/e.dataset.data.reduce((e,t)=>e+t,0)*100).toFixed(1);return`${t}: $${a.toLocaleString()} (${r}%)`}}}}};default:return e}})(),...s};return c?(0,x.jsx)("div",{className:`flex items-center justify-center bg-gray-50 rounded-lg ${l}`,style:{height:n,width:o},children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),(0,x.jsx)("p",{className:"text-gray-500 text-sm",children:"Loading chart..."})]})}):d?(0,x.jsx)("div",{className:`flex items-center justify-center bg-red-50 rounded-lg ${l}`,style:{height:n,width:o},children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"text-red-500 mb-2",children:(0,x.jsx)("svg",{className:"w-8 h-8 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,x.jsx)("p",{className:"text-red-600 text-sm",children:d})]})}):(0,x.jsx)("div",{className:`relative ${l}`,style:{height:n,width:o},children:(0,x.jsx)(h.t1,{ref:u,type:t,data:a,options:b})})};var b=a(8756),y=a(319),f=a(1208),w=a(233),v=a(3381),j=a(1329),N=a(1176),D=a(1620),k=a(4912),B=a(3950),S=a(8621),C=a(6691),E=a(8605),A=a(3695),M=a(4137),T=a(7744);const P={primary:"#3B82F6",secondary:"#10B981",accent:"#F59E0B",danger:"#EF4444",warning:"#F97316",info:"#06B6D4",success:"#22C55E",purple:"#8B5CF6",pink:"#EC4899",gray:"#6B7280",lightGray:"#E5E7EB",darkGray:"#374151",blue:"#3B82F6",red:"#EF4444",orange:"#F97316",green:"#22C55E"},F=function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12;const s=[],n=t.reduce((e,t)=>e+t.balance,0),o=new Date;let l;switch(a){case"day":l=(0,b.e)(o,r-1);break;case"week":l=(0,y.k)(o,r-1);break;case"month":default:l=(0,f.a)(o,r-1);break;case"quarter":l=(0,w.c)(o,r-1);break;case"year":l=(0,v.d)(o,r-1)}for(let i=0;i<r;i++){const t=new Date(l);t.setDate(l.getDate()+i);const r=n+e.filter(e=>new Date(e.date)<=t).reduce((e,t)=>e+t.amount,0);s.push({label:(0,j.GP)(t,R(a)),value:r,date:t.toISOString()})}return s},$=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;const r=[],s=[],n=new Date;let o;switch(t){case"day":o=(0,b.e)(n,a-1);break;case"week":o=(0,y.k)(n,a-1);break;case"month":default:o=(0,f.a)(n,a-1);break;case"quarter":o=(0,w.c)(n,a-1);break;case"year":o=(0,v.d)(n,a-1)}for(let l=0;l<a;l++){const a=new Date(o);a.setDate(o.getDate()+l);const n=L(a,t),i=O(a,t),c=e.filter(e=>{const t=new Date(e.date);return t>=n&&t<=i}),d=c.filter(e=>e.amount>0).reduce((e,t)=>e+t.amount,0),u=Math.abs(c.filter(e=>e.amount<0).reduce((e,t)=>e+t.amount,0));r.push({label:(0,j.GP)(a,R(t)),value:d,date:a.toISOString()}),s.push({label:(0,j.GP)(a,R(t)),value:u,date:a.toISOString()})}return{income:r,expenses:s}},I=(e,t)=>{const a=new Map,r=new Date;let s;switch(t){case"day":s=(0,N.o)(r);break;case"week":s=(0,D.k)(r);break;case"month":default:s=(0,k.w)(r);break;case"quarter":s=(0,B.a)(r);break;case"year":s=(0,S.D)(r)}e.filter(e=>{const t=new Date(e.date);return t>=s&&t<=r&&e.amount<0}).forEach(e=>{const t=e.category||"Uncategorized",r=Math.abs(e.amount);a.set(t,(a.get(t)||0)+r)});return Array.from(a.entries()).map(e=>{let[t,a]=e;return{label:t,value:a,date:(new Date).toISOString()}}).sort((e,t)=>t.value-e.value).slice(0,8)},R=e=>{switch(e){case"day":case"week":default:return"MMM dd";case"month":return"MMM yyyy";case"quarter":return"QQQ yyyy";case"year":return"yyyy"}},L=(e,t)=>{switch(t){case"day":return(0,N.o)(e);case"week":return(0,D.k)(e);case"month":default:return(0,k.w)(e);case"quarter":return(0,B.a)(e);case"year":return(0,S.D)(e)}},O=(e,t)=>{switch(t){case"day":return(0,C.D)(e);case"week":return(0,E.$)(e);case"month":default:return(0,A.p)(e);case"quarter":return(0,M.j)(e);case"year":return(0,T.Q)(e)}},z=e=>{let{budgets:t,transactions:a,period:s,height:n=300,className:o="",onDataPointClick:l,loading:i=!1,error:c=null}=e;const d=(0,r.useMemo)(()=>{if(!t.length)return{labels:[],datasets:[]};const e=t.filter(e=>e.isActive).map(e=>{const t=a.filter(t=>t.category===e.category&&new Date(t.date)>=new Date(e.startDate)&&new Date(t.date)<=new Date(e.endDate)&&t.amount<0),r=Math.abs(t.reduce((e,t)=>e+t.amount,0));return{category:e.category,budgeted:e.amount,actual:r,remaining:e.amount-r,percentage:r/e.amount*100}});e.sort((e,t)=>t.percentage-e.percentage);const r=e.map(e=>e.category),s=e.map(e=>e.budgeted),n=e.map(e=>e.actual);return{labels:r,datasets:[{label:"Budgeted",data:s,backgroundColor:P.blue,borderColor:P.blue,borderWidth:2,borderRadius:4,borderSkipped:!1},{label:"Actual",data:n,backgroundColor:e.map(e=>e.percentage>100?P.red:e.percentage>80?P.orange:P.green),borderColor:e.map(e=>e.percentage>100?P.red:e.percentage>80?P.orange:P.green),borderWidth:2,borderRadius:4,borderSkipped:!1}]}},[t,a,s]),u=(0,r.useMemo)(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Budget vs Actual Spending",font:{size:16,weight:"bold"},color:"#374151",padding:{top:10,bottom:20}},legend:{position:"bottom",labels:{usePointStyle:!0,padding:20,font:{size:12},color:"#374151"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#374151",borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{label:function(e){const a=e.dataset.label||"",r=e.parsed.y,s=e.label,n=t.find(e=>e.category===s);if(n&&1===e.datasetIndex){const e=r/n.amount*100,t=e>100?"Over Budget":e>80?"Near Limit":"On Track";return`${a}: $${r.toLocaleString()} (${e.toFixed(1)}% - ${t})`}return`${a}: $${r.toLocaleString()}`}}}},scales:{x:{grid:{display:!1},ticks:{maxRotation:45,minRotation:0}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"},ticks:{callback:function(e){return"$"+e.toLocaleString()}}}},interaction:{intersect:!1,mode:"index"}}),[t]);return i?(0,x.jsx)("div",{className:`bg-white rounded-lg shadow-sm border p-6 ${o}`,children:(0,x.jsxs)("div",{className:"animate-pulse",children:[(0,x.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),(0,x.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})}):c?(0,x.jsx)("div",{className:`bg-white rounded-lg shadow-sm border p-6 ${o}`,children:(0,x.jsx)("div",{className:"text-center text-red-600",children:(0,x.jsxs)("p",{children:["Error loading budget chart: ",c]})})}):t.length?(0,x.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border p-6 ${o}`,children:[(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Budget vs Actual Spending"}),(0,x.jsx)("p",{className:"text-sm text-gray-600",children:"Compare your budgeted amounts with actual spending by category"})]}),(0,x.jsx)(p,{type:"bar",data:d,options:u,height:n,width:"100%",onChartClick:(e,a)=>{if(a.length>0&&l){const e=a[0].index,r=a[0].datasetIndex,s=d.labels[e],n=t.find(e=>e.category===s);n&&l({category:s,budgeted:n.amount,actual:d.datasets[1].data[e],type:0===r?"budgeted":"actual",budget:n})}},loading:i,error:c}),(0,x.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:t.filter(e=>e.isActive).length}),(0,x.jsx)("div",{className:"text-gray-500",children:"Active Budgets"})]}),(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"text-2xl font-bold text-green-600",children:t.filter(e=>e.isActive&&e.spent<=e.amount).length}),(0,x.jsx)("div",{className:"text-gray-500",children:"On Track"})]}),(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"text-2xl font-bold text-red-600",children:t.filter(e=>e.isActive&&e.spent>e.amount).length}),(0,x.jsx)("div",{className:"text-gray-500",children:"Over Budget"})]})]})]}):(0,x.jsx)("div",{className:`bg-white rounded-lg shadow-sm border p-6 ${o}`,children:(0,x.jsxs)("div",{className:"text-center py-8",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Budget vs Actual Spending"}),(0,x.jsx)("p",{className:"text-gray-500 mb-4",children:"No budgets found. Create budgets to see spending comparisons."})]})})},U=e=>{let{chartType:t,transactions:a,accounts:s,period:n,budgets:o=[],height:l=300,className:i="",onDataPointClick:c,loading:d=!1,error:u=null,customOptions:g={}}=e;const m=(0,r.useMemo)(()=>G(t,n),[t,n]),h=(0,r.useMemo)(()=>{switch(t){case"balance":{const e=F(a,s,n);return{labels:e.map(e=>e.label),datasets:[{label:"Balance",data:e.map(e=>e.value),borderColor:P.primary,backgroundColor:P.primary+"20",fill:!0,tension:.4}]}}case"income-expense":{const{income:e,expenses:t}=$(a,n);return{labels:e.map(e=>e.label),datasets:[{label:"Income",data:e.map(e=>e.value),backgroundColor:P.success,borderColor:P.success},{label:"Expenses",data:t.map(e=>e.value),backgroundColor:P.danger,borderColor:P.danger}]}}case"category":{const e=I(a,n);return{labels:e.map(e=>e.label),datasets:[{label:"Spending",data:e.map(e=>e.value),backgroundColor:e.map((e,t)=>Object.values(P)[t%Object.keys(P).length]),borderColor:e.map((e,t)=>Object.values(P)[t%Object.keys(P).length])}]}}default:return{labels:[],datasets:[]}}},[t,a,s,n]),b=(0,r.useMemo)(()=>({...q(t,m.title),...g}),[t,m.title,g]);return"budget-vs-actual"===t?(0,x.jsx)(z,{budgets:o,transactions:a,period:n,height:l,className:i,onDataPointClick:e=>null===c||void 0===c?void 0:c(e,t),loading:d,error:u}):d?(0,x.jsx)("div",{className:`bg-white rounded-lg shadow-sm border p-6 ${i}`,children:(0,x.jsxs)("div",{className:"animate-pulse",children:[(0,x.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),(0,x.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})}):u?(0,x.jsx)("div",{className:`bg-white rounded-lg shadow-sm border p-6 ${i}`,children:(0,x.jsx)("div",{className:"text-center text-red-600",children:(0,x.jsxs)("p",{children:["Error loading chart: ",u]})})}):(0,x.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border p-6 ${i}`,children:[(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:m.title}),(0,x.jsx)("p",{className:"text-sm text-gray-600",children:m.description})]}),(0,x.jsx)(p,{type:Y(t),data:h,options:b,height:l,width:"100%",onChartClick:(e,r)=>{if(r.length>0&&c){const e=r[0].index,o=r[0].datasetIndex;let l;switch(t){case"balance":l=F(a,s,n)[e];break;case"income-expense":const{income:t,expenses:r}=$(a,n);l=0===o?t[e]:r[e],l.type=0===o?"income":"expense";break;case"category":l=I(a,n)[e];break;default:l=null}l&&c(l,t)}},loading:d,error:u})]})},G=(e,t)=>{t.charAt(0).toUpperCase(),t.slice(1);switch(e){case"balance":return{title:"Balance Trend",description:`Shows your account balance over the ${t} period`};case"income-expense":return{title:"Income vs Expenses",description:`Compares your income and expenses for the ${t}`};case"category":return{title:"Spending by Category",description:`Breakdown of your spending by category for the ${t}`};case"budget-vs-actual":return{title:"Budget vs Actual",description:`Shows how your spending compares to your budget for the ${t}`};default:return{title:"Chart",description:"Financial data visualization"}}},Y=e=>{switch(e){case"balance":default:return"line";case"income-expense":case"budget-vs-actual":return"bar";case"category":return"doughnut"}},q=(e,t)=>{const a={responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:t,font:{size:16,weight:"bold"},color:"#374151",padding:{top:10,bottom:20}},legend:{position:"bottom",labels:{usePointStyle:!0,padding:20,font:{size:12},color:"#374151"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#374151",borderWidth:1,cornerRadius:8,displayColors:!0}}};switch(e){case"balance":return{...a,scales:{y:{ticks:{callback:function(e){return"$"+e.toLocaleString()}}}},plugins:{...a.plugins,tooltip:{...a.plugins.tooltip,callbacks:{label:function(e){return`Balance: $${e.parsed.y.toLocaleString()}`}}}}};case"income-expense":return{...a,scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"},ticks:{callback:function(e){return"$"+e.toLocaleString()}}}},plugins:{...a.plugins,tooltip:{...a.plugins.tooltip,callbacks:{label:function(e){return`${e.dataset.label||""}: $${e.parsed.y.toLocaleString()}`}}}}};case"category":return{...a,plugins:{...a.plugins,legend:{position:"right",labels:{usePointStyle:!0,padding:15,font:{size:11}}},tooltip:{...a.plugins.tooltip,callbacks:{label:function(e){const t=e.label||"",a=e.parsed,r=(a/e.dataset.data.reduce((e,t)=>e+t,0)*100).toFixed(1);return`${t}: $${a.toLocaleString()} (${r}%)`}}}}};default:return a}};var W=a(4068),Z=a(1097),H=a(8867);const Q=[{type:"balance",title:"Balance Trend",description:"Track your account balance over time"},{type:"income-expense",title:"Income vs Expenses",description:"Compare your income and spending patterns"},{type:"category",title:"Spending by Category",description:"See where your money is going"},{type:"budget-vs-actual",title:"Budget vs Actual",description:"Compare your spending to your budgets"}],_=e=>{let{transactions:t,accounts:a,period:s,budgets:n=[],loading:o=!1,error:i=null,onExport:c,onRefresh:d}=e;const[g,m]=(0,r.useState)(null),[h,p]=(0,r.useState)(!1),b=async()=>{if(d){p(!0);try{await d()}finally{p(!1)}}},y=(e,t)=>{console.log(`${t} data point clicked:`,e)};return(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Financial Analytics"}),(0,x.jsx)("p",{className:"text-gray-600",children:"Interactive charts and insights for your financial data"})]}),(0,x.jsx)("div",{className:"flex items-center space-x-3",children:(0,x.jsxs)(l.$,{onClick:c,disabled:o,className:"flex items-center space-x-2",children:[(0,x.jsx)(u.A,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:"Export Data"})]})})]}),(0,x.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6",children:Q.map(e=>{const r=g===e.type;return(0,x.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border transition-all duration-300 "+(r?"col-span-full":"col-span-1"),children:[(0,x.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,x.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsxs)(l.$,{onClick:b,disabled:h,variant:"outline",size:"sm",className:"flex items-center space-x-1",children:[(0,x.jsx)(W.A,{className:"w-4 h-4 "+(h?"animate-spin":"")}),(0,x.jsx)("span",{children:"Refresh"})]}),(0,x.jsx)(l.$,{onClick:()=>{return t=e.type,void m(g===t?null:t);var t},variant:"outline",size:"sm",className:"flex items-center space-x-1",children:r?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Z.A,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:"Collapse"})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(H.A,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:"Expand"})]})})]})]})}),(0,x.jsx)("div",{className:"p-4",children:(0,x.jsx)(U,{chartType:e.type,transactions:t,accounts:a,period:s,budgets:n,height:r?500:300,loading:o,error:i,onDataPointClick:y})})]},e.type)})}),o&&(0,x.jsxs)("div",{className:"text-center py-8",children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,x.jsx)("p",{className:"text-gray-600 mt-2",children:"Loading charts..."})]}),i&&(0,x.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,x.jsxs)("div",{className:"flex",children:[(0,x.jsx)("div",{className:"flex-shrink-0",children:(0,x.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,x.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,x.jsx)("div",{className:"ml-3",children:(0,x.jsxs)("p",{className:"text-sm text-red-800",children:["Error loading charts: ",i]})})]})})]})};var J=a(172);const K={format:"csv",includeHeaders:!0,dateFormat:"MMM dd, yyyy",currencyFormat:"USD"},V=(e,t)=>{let a=[...e];if(t.dateRange&&(a=a.filter(e=>{const a=new Date(e.date),r=new Date(t.dateRange.start),s=new Date(t.dateRange.end);return a>=r&&a<=s})),t.amountRange&&(a=a.filter(e=>{const a=Math.abs(e.amount);return a>=t.amountRange.min&&a<=t.amountRange.max})),t.categories&&t.categories.length>0&&(a=a.filter(e=>t.categories.includes(e.category))),t.tags&&t.tags.length>0&&(a=a.filter(e=>t.tags.some(t=>e.tags.includes(t)))),t.accountIds&&t.accountIds.length>0&&(a=a.filter(e=>t.accountIds.includes(e.accountId))),t.transactionTypes&&t.transactionTypes.length>0&&(a=a.filter(e=>{const a=e.amount>0,r=e.amount<0;return!(!t.transactionTypes.includes("income")||!a)||!(!t.transactionTypes.includes("expense")||!r)})),t.status&&t.status.length>0&&(a=a.filter(e=>{const a=e.pending,r=!e.pending;return!(!t.status.includes("pending")||!a)||!(!t.status.includes("cleared")||!r)})),t.searchTerm){const e=t.searchTerm.toLowerCase();a=a.filter(t=>t.description.toLowerCase().includes(e)||t.category.toLowerCase().includes(e)||t.tags.some(t=>t.toLowerCase().includes(e))||t.cleanMerchant.cleanName.toLowerCase().includes(e))}return a},X=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K;const a=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return{"Transaction ID":e.id,Date:a(e.date),Description:e.description,Amount:(r=e.amount,new Intl.NumberFormat("en-US",{style:"currency",currency:t.currencyFormat}).format(r)),Category:e.category,Tags:e.tags.join(", "),"Account ID":e.accountId,Merchant:e.cleanMerchant.cleanName,Status:e.pending?"Pending":"Cleared",Notes:e.notes||"","Created At":a(e.createdAt),"Updated At":a(e.updatedAt)};var r},ee=(e,t,a)=>{const r=new Blob([e],{type:a}),s=URL.createObjectURL(r),n=document.createElement("a");n.href=s,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)},te=function(e,t){return`${e}${!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?`_${(new Date).toISOString().slice(0,10)}_${(new Date).toTimeString().slice(0,8).replace(/:/g,"-")}`:""}.${t}`},ae=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:K;try{let r,s,n;"csv"===a.format?(r=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:K;const r=V(e,t);if(0===r.length)throw new Error("No transactions found matching the current filters.");const s=r.map(e=>X(e,a));return(0,J.A)(s,{header:a.includeHeaders,columns:Object.keys(s[0])})}(e,t,a),s=te("transactions","csv"),n="text/csv"):(r=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:K;const r=V(e,t);if(0===r.length)throw new Error("No transactions found matching the current filters.");const s=r.map(e=>X(e,a));return JSON.stringify(s,null,2)}(e,t,a),s=te("transactions","json"),n="application/json"),ee(r,s,n)}catch(r){throw console.error("Export failed:",r),r}},re=(e,t,a,s)=>{const[n,o]=(0,r.useState)(!1),[l,i]=(0,r.useState)(null),c=(0,r.useMemo)(()=>{const r=t.reduce((e,t)=>e+t.balance,0),s=e.filter(e=>{const t=new Date(e.date),r=new Date;let s;switch(a){case"day":s=new Date(r.getFullYear(),r.getMonth(),r.getDate());break;case"week":s=new Date(r.getTime()-6048e5);break;case"month":default:s=new Date(r.getFullYear(),r.getMonth(),1);break;case"quarter":const e=Math.floor(r.getMonth()/3);s=new Date(r.getFullYear(),3*e,1);break;case"year":s=new Date(r.getFullYear(),0,1)}return t>=s&&t<=r}),n=s.filter(e=>e.amount>0).reduce((e,t)=>e+t.amount,0),o=Math.abs(s.filter(e=>e.amount<0).reduce((e,t)=>e+t.amount,0)),l=n-o,i=n>0?l/n*100:0,c=new Map;s.filter(e=>e.amount<0).forEach(e=>{const t=e.category||"Uncategorized";c.set(t,(c.get(t)||0)+Math.abs(e.amount))});const d=Array.from(c.entries()).sort((e,t)=>{let[,a]=e,[,r]=t;return r-a})[0]||["None",0];return{totalBalance:r,totalIncome:n,totalExpenses:o,netFlow:l,savingsRate:i,topCategory:d[0],topCategoryAmount:d[1]}},[e,t,a]),d=(0,r.useCallback)(async()=>{o(!0),i(null);try{await ae(e,s)}catch(t){i(t instanceof Error?t.message:"Export failed")}finally{o(!1)}},[e,s]),u=(0,r.useCallback)(async()=>{o(!0),i(null);try{await function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:K;const r=V(e,t),s={"Total Transactions":r.length,"Total Income":r.filter(e=>e.amount>0).reduce((e,t)=>e+t.amount,0),"Total Expenses":Math.abs(r.filter(e=>e.amount<0).reduce((e,t)=>e+t.amount,0)),"Net Flow":r.reduce((e,t)=>e+t.amount,0),"Average Transaction":r.length>0?r.reduce((e,t)=>e+Math.abs(t.amount),0)/r.length:0,"Pending Transactions":r.filter(e=>e.pending).length,"Cleared Transactions":r.filter(e=>!e.pending).length},n=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:a.currencyFormat}).format(e),o={"Total Transactions":s["Total Transactions"],"Total Income":n(s["Total Income"]),"Total Expenses":n(s["Total Expenses"]),"Net Flow":n(s["Net Flow"]),"Average Transaction":n(s["Average Transaction"]),"Pending Transactions":s["Pending Transactions"],"Cleared Transactions":s["Cleared Transactions"]};let l,i,c;"csv"===a.format?(l=(0,J.A)([o],{header:a.includeHeaders}),i=te("summary_statistics","csv"),c="text/csv"):(l=JSON.stringify(o,null,2),i=te("summary_statistics","json"),c="application/json"),ee(l,i,c)}(e,s)}catch(t){i(t instanceof Error?t.message:"Export failed")}finally{o(!1)}},[e,s]),g=(0,r.useMemo)(()=>({balanceTrend:{transactions:e,accounts:t,period:a},incomeExpense:{transactions:e,period:a},categorySpending:{transactions:e,period:a},summary:c}),[e,t,a,c]),m=(0,r.useCallback)(()=>Promise.resolve(),[]);return{chartData:g,summary:c,isExporting:n,exportError:l,handleExportTransactions:d,handleExportSummary:u,refreshCharts:m}};var se=a(1437),ne=a(8247);var oe=a(2537);const le=r.lazy(()=>a.e(129).then(a.bind(a,8129)).then(e=>({default:e.AccountDetail}))),ie=r.lazy(()=>a.e(440).then(a.bind(a,3440)).then(e=>({default:e.KPISection}))),ce=r.lazy(()=>a.e(79).then(a.bind(a,3079)).then(e=>({default:e.AccountOverview}))),de=r.lazy(()=>Promise.all([a.e(358),a.e(66)]).then(a.bind(a,66)).then(e=>({default:e.RecentActivity}))),ue=r.lazy(()=>a.e(898).then(a.bind(a,1898)).then(e=>({default:e.BudgetOverview}))),ge=r.lazy(()=>a.e(977).then(a.bind(a,8358)).then(e=>({default:e.BudgetForm}))),me=()=>{const{state:e,totalBalance:t,viewAccountDetail:a,accountFilter:m,changePeriod:h}=(0,s.x)(),[p,b]=(0,r.useState)(!1),[y,f]=(0,r.useState)(null),{budgets:w}=(0,oe.l)(),v=(e=>{let{accounts:t,accountFilter:a,selectedPeriod:s,customDateRange:n,isLoading:o}=e;const l=(0,r.useMemo)(()=>t.filter(e=>"both"===a||("personal"===a?!e.type.includes("BUSINESS"):"business"!==a||e.type.includes("BUSINESS"))),[t,a]),i=(0,r.useMemo)(()=>l.reduce((e,t)=>e+t.balance,0),[l]),c=(0,r.useMemo)(()=>t.flatMap(e=>e.transactions||[]),[t]),d=(0,r.useMemo)(()=>{const e=(0,ne.Ac)(t,a);return(0,se.Y)(e,s,n,i)},[t,a,s,n,i]),u=(0,r.useMemo)(()=>{const e=(0,ne.Ac)(t,a);return(0,se.Td)(e,s)},[t,a,s]),g=t.length>0;return{filteredAccounts:l,filteredTotalBalance:i,filteredSummary:d,trendData:u,allTransactions:c,hasAccounts:g}})({accounts:e.accounts,accountFilter:m,selectedPeriod:e.selectedPeriod,customDateRange:e.customDateRange,isLoading:e.isLoading}),{filteredAccounts:j,filteredSummary:N,trendData:D,allTransactions:k,hasAccounts:B}=v,S=e.isLoading,{chartData:C,summary:E,isExporting:A,exportError:M,handleExportTransactions:T,handleExportSummary:P,refreshCharts:F}=re(k,j,e.selectedPeriod,e.filters);return"account-detail"===e.currentScreen?(0,x.jsx)(r.Suspense,{fallback:(0,x.jsx)(i.Rs,{text:"Loading Account Details..."}),children:(0,x.jsx)(le,{})}):S?(0,x.jsx)(i.Rs,{text:"Loading your financial data..."}):B?(0,x.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,x.jsx)(n.a,{}),(0,x.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.error&&(0,x.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,x.jsxs)("div",{className:"flex",children:[(0,x.jsx)("div",{className:"flex-shrink-0",children:(0,x.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,x.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,x.jsx)("div",{className:"ml-3",children:(0,x.jsx)("p",{className:"text-sm text-red-800",children:e.error})})]})}),(0,x.jsx)("div",{className:"flex justify-center mb-6",children:(0,x.jsx)("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:o.DU.map(t=>(0,x.jsx)("button",{onClick:()=>{"custom"===t?alert("Custom date picker coming soon!"):h(t)},className:"px-3 py-1.5 rounded-md text-sm font-medium transition-all "+(e.selectedPeriod===t?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-800"),children:"day"===t?"D":"week"===t?"W":"month"===t?"M":"quarter"===t?"Q":"year"===t?"Y":"5year"===t?"5Y":"custom"===t?"Custom":t},t))})}),(0,x.jsx)("div",{className:"mb-6",children:(0,x.jsx)(r.Suspense,{fallback:(0,x.jsx)(i.Zu,{}),children:(0,x.jsx)(ie,{summary:N,totalBalance:N.totalBalance,period:e.selectedPeriod,budgets:w,balanceTrend:null===D||void 0===D?void 0:D.balance,incomeTrend:null===D||void 0===D?void 0:D.income,expenseTrend:null===D||void 0===D?void 0:D.expenses,savingsTrend:null===D||void 0===D?void 0:D.savings})})}),(0,x.jsx)("div",{className:"mb-6",children:(0,x.jsx)(r.Suspense,{fallback:(0,x.jsx)(i.Zu,{}),children:(0,x.jsx)(ce,{accounts:j,onAccountSelect:a,accountFilter:m})})}),(0,x.jsx)("div",{className:"mb-6",children:(0,x.jsx)(_,{transactions:k,accounts:j,period:e.selectedPeriod,budgets:w,loading:S,error:e.error,onExport:T,onRefresh:F})}),(0,x.jsxs)("div",{className:"mb-6",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,x.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Budget Management"}),(0,x.jsxs)(l.$,{onClick:()=>b(!0),className:"flex items-center space-x-2",children:[(0,x.jsx)(d.A,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:"Add Budget"})]})]}),(0,x.jsx)(r.Suspense,{fallback:(0,x.jsx)(i.Zu,{}),children:(0,x.jsx)(ue,{onBudgetSelect:f,onCreateBudget:()=>b(!0)})})]}),(0,x.jsx)("div",{className:"mb-6",children:(0,x.jsx)(r.Suspense,{fallback:(0,x.jsx)(i.Zu,{}),children:(0,x.jsx)(de,{accounts:j,limit:10})})}),(0,x.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Export Data"}),(0,x.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,x.jsxs)(l.$,{onClick:T,disabled:A,className:"flex items-center space-x-2",children:[(0,x.jsx)(u.A,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:A?"Exporting...":"Export Transactions"})]}),(0,x.jsxs)(l.$,{onClick:P,disabled:A,className:"flex items-center space-x-2",children:[(0,x.jsx)(g.A,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:A?"Exporting...":"Export Summary"})]})]}),M&&(0,x.jsx)("p",{className:"text-red-600 text-sm mt-2",children:M})]})]}),p&&(0,x.jsx)(r.Suspense,{fallback:(0,x.jsx)(i.Rs,{text:"Loading Budget Form..."}),children:(0,x.jsx)(ge,{budget:y,onSave:e=>{b(!1)},onCancel:()=>b(!1),isOpen:p})})]}):(0,x.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,x.jsx)(n.a,{}),(0,x.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,x.jsxs)("div",{className:"text-center py-12",children:[(0,x.jsx)(c.A,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,x.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Welcome to FinanceApp"}),(0,x.jsx)("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Connect your bank accounts to get started with smart financial management. We'll help you track spending, categorize transactions, and gain insights into your financial health."}),(0,x.jsx)(l.$,{onClick:()=>alert("Bank connection coming soon!"),children:"Connect Your First Account"})]}),(0,x.jsxs)("div",{className:"mt-16 grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,x.jsx)("span",{className:"text-2xl",children:"\ud83d\udcca"})}),(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Smart Analytics"}),(0,x.jsx)("p",{className:"text-gray-600",children:"Get insights into your spending patterns and financial trends with interactive charts and KPIs."})]}),(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,x.jsx)("span",{className:"text-2xl",children:"\ud83c\udfaf"})}),(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Budget Management"}),(0,x.jsx)("p",{className:"text-gray-600",children:"Set budgets, track spending, and get alerts when you're approaching your limits."})]}),(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,x.jsx)("span",{className:"text-2xl",children:"\ud83d\udd12"})}),(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Secure & Private"}),(0,x.jsx)("p",{className:"text-gray-600",children:"Your data is protected with 256-bit encryption and industry-leading security practices."})]})]})]})]})}}}]);
//# sourceMappingURL=210.d73d4d6c.chunk.js.map